





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://assets-cdn.github.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-pCRDtdb3GlUU48h+oRJVA8f0GddrLnU97wB7mHQ7q6c40vMbMMZsFdk0IMhkUFRqw1M/y4EkWxtaKwfeFezOkQ==" rel="stylesheet" href="https://assets-cdn.github.com/assets/frameworks-73f533b7cc08a9d040e601cfd38fa585.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-Dj1g/vtQvcb4iCbrTNsqqoA2c0RXk9agh56Zoc3HlINijvd5zMVbYSWPyps79sf3ISjRybMerm9UuqQ6ZGtRSQ==" rel="stylesheet" href="https://assets-cdn.github.com/assets/github-15db78e9ccb9147b44bc64d0db47b5e2.css" />
  
  
  
  

  <meta name="viewport" content="width=device-width">
  
  <title>epub.js/epub.min.js at v0.2.19 · futurepress/epub.js</title>
    <meta name="description" content="Enhanced eBooks in the browser.">
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta property="og:image" content="https://avatars1.githubusercontent.com/u/4634932?s=400&amp;v=4" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="futurepress/epub.js" /><meta property="og:url" content="https://github.com/futurepress/epub.js" /><meta property="og:description" content="epub.js - Enhanced eBooks in the browser." />

  <link rel="assets" href="https://assets-cdn.github.com/">
  <link rel="web-socket" href="wss://live.github.com/_sockets/VjI6MjkwNDA1MDQzOjVjZTU4NzY0ZjIxZWI4ODUyNDJkOTdhZjcxNzcyMDgxNjQ1MmE3ZGVhNzY4YjhjYzU0MTQ5M2ZkZDc4NDMwOGM=--f8e3698003822cc19405ca9b7ef334188413efba">
  <meta name="pjax-timeout" content="1000">
  <link rel="sudo-modal" href="/sessions/sudo_modal">
  <meta name="request-id" content="CA70:11B1:D5FD71:1C58E14:5B4F44BD" data-pjax-transient>


  

  <meta name="selected-link" value="repo_source" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
    <meta name="google-analytics" content="UA-3769691-2">

<meta name="octolytics-host" content="collector.githubapp.com" /><meta name="octolytics-app-id" content="github" /><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event" /><meta name="octolytics-dimension-request_id" content="CA70:11B1:D5FD71:1C58E14:5B4F44BD" /><meta name="octolytics-dimension-region_edge" content="iad" /><meta name="octolytics-dimension-region_render" content="iad" /><meta name="octolytics-actor-id" content="33718000" /><meta name="octolytics-actor-login" content="AK0088154" /><meta name="octolytics-actor-hash" content="a1b8d1b8399b1632b1e9f192d1a1e442c2f0e0a8f2385c37f943f517cab29279" />
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" />



  <meta class="js-ga-set" name="userId" content="d9e4b1aaf563b0127fa10fa2043154e3" %>

<meta class="js-ga-set" name="dimension1" content="Logged In">


  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="AK0088154">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="NzAzYTkwM2ZjNzllMGExODk5OWIyZTQ0OGU0Y2M4N2UwOTg5MjVlMDEwYWFlNDM3Y2FmMTY2NmY4MjdmMDRiMXx7InJlbW90ZV9hZGRyZXNzIjoiMzguOTYuMTM1LjYiLCJyZXF1ZXN0X2lkIjoiQ0E3MDoxMUIxOkQ1RkQ3MToxQzU4RTE0OjVCNEY0NEJEIiwidGltZXN0YW1wIjoxNTMxOTIxNjEzLCJob3N0IjoiZ2l0aHViLmNvbSJ9">

    <meta name="enabled-features" content="UNIVERSE_BANNER,FREE_TRIALS,MARKETPLACE_INSIGHTS,MARKETPLACE_SEARCH,MARKETPLACE_INSIGHTS_CONVERSION_PERCENTAGES,SECURITY_CHECKUP">

  <meta name="html-safe-nonce" content="0375bd36d01ee5b4ee1948d3fb1a92a66893f23a">

  <meta http-equiv="x-pjax-version" content="418f8435ff959aa9fd80dd4ada7a1336">
  

      <link href="https://github.com/futurepress/epub.js/commits/v0.2.19.atom" rel="alternate" title="Recent Commits to epub.js:v0.2.19" type="application/atom+xml">

  <meta name="go-import" content="github.com/futurepress/epub.js git https://github.com/futurepress/epub.js.git">

  <meta name="octolytics-dimension-user_id" content="4634932" /><meta name="octolytics-dimension-user_login" content="futurepress" /><meta name="octolytics-dimension-repository_id" content="6418762" /><meta name="octolytics-dimension-repository_nwo" content="futurepress/epub.js" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="6418762" /><meta name="octolytics-dimension-repository_network_root_nwo" content="futurepress/epub.js" /><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false" />


    <link rel="canonical" href="https://github.com/futurepress/epub.js/blob/v0.2.19/build/epub.min.js" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">


  <meta name="u2f-support" content="true">

<link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-in env-production page-blob">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="p-3 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        
<header class="Header  f5" role="banner">
  <div class="d-flex flex-justify-between px-3 container-lg">
    <div class="d-flex flex-justify-between ">
      <div class="">
        <a class="header-logo-invertocat" href="https://github.com/" data-hotkey="g d" aria-label="Homepage" data-ga-click="Header, go to dashboard, icon:logo">
  <svg height="32" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>

      </div>

    </div>

    <div class="HeaderMenu d-flex flex-justify-between flex-auto">
      <div class="d-flex">
            <div class="">
              <div class="header-search scoped-search site-scoped-search js-site-search position-relative js-jump-to"
  role="search combobox"
  aria-owns="jump-to-results"
  aria-label="Search or jump to"
  aria-haspopup="listbox"
  aria-expanded="true"
>
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" data-scope-type="Repository" data-scope-id="6418762" data-scoped-search-url="/futurepress/epub.js/search" data-unscoped-search-url="/search" action="/futurepress/epub.js/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
      <label class="form-control header-search-wrapper header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container">
        <input type="text"
          class="form-control header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
          data-hotkey="s,/"
          name="q"
          value=""
          placeholder="Search or jump to…"
          data-unscoped-placeholder="Search or jump to…"
          data-scoped-placeholder="Search or jump to…"
          autocapitalize="off"
          aria-autocomplete="list"
          aria-controls="jump-to-results"
          data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations#csrf-token=t/J8aqZAWhoqWgRI6cAj7Hv2PqLO4NGhQbFuAB6zGVbtouA2voyM6BQuGfn72zc3xMCr+zwdrjvmXcbpa8keDA=="
          spellcheck="false"
          autocomplete="off"
          >
          <input type="hidden" class="js-site-search-type-field" name="type" >
            <img src="https://assets-cdn.github.com/images/search-shortcut-hint.svg" alt="" class="mr-2 header-search-key-slash">

            <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
              <ul class="d-none js-jump-to-suggestions-template-container">
                <li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item">
                  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center p-2 jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open" href="">
                    <div class="jump-to-octicon js-jump-to-octicon mr-2 text-center d-none"></div>
                    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar" alt="" aria-label="Team" src="" width="28" height="28">

                    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
                    </div>

                    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
                      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
                        In this repository
                      </span>
                      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
                        All GitHub
                      </span>
                      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
                    </div>

                    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
                      Jump to
                      <span class="d-inline-block ml-1 v-align-middle">↵</span>
                    </div>
                  </a>
                </li>
                <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-repo-octicon-template" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
                <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-project-octicon-template" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
                <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-search-octicon-template" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
              </ul>
              <ul class="d-none js-jump-to-no-results-template-container">
                <li class="d-flex flex-justify-center flex-items-center p-3 f5 d-none">
                  <span class="text-gray">No suggested jump to results</span>
                </li>
              </ul>

              <ul id="jump-to-results" class="js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container" >
                <li class="d-flex flex-justify-center flex-items-center p-0 f5">
                  <img src="https://assets-cdn.github.com/images/spinners/octocat-spinner-128.gif" alt="Octocat Spinner Icon" class="m-2" width="28">
                </li>
              </ul>
            </div>
      </label>
</form>  </div>
</div>

            </div>

          <ul class="d-flex pl-2 flex-items-center text-bold list-style-none" role="navigation">
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-hotkey="g p" data-ga-click="Header, click, Nav menu - item:pulls context:user" aria-label="Pull requests you created" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls" href="/pulls">
                Pull requests
</a>            </li>
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-hotkey="g i" data-ga-click="Header, click, Nav menu - item:issues context:user" aria-label="Issues you created" data-selected-links="/issues /issues/assigned /issues/mentioned /issues" href="/issues">
                Issues
</a>            </li>
              <li>
                <a class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-octo-click="marketplace_click" data-octo-dimensions="location:nav_bar" data-selected-links=" /marketplace" href="/marketplace">
                   Marketplace
</a>              </li>
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="/explore">
                Explore
</a>            </li>
          </ul>
      </div>

      <div class="d-flex">
        
<ul class="user-nav d-flex flex-items-center list-style-none" id="user-links">
  <li class="dropdown">
    <span class="d-inline-block  px-2">
      
    <a aria-label="You have no unread notifications" class="notification-indicator tooltipped tooltipped-s  js-socket-channel js-notification-indicator" data-hotkey="g n" data-ga-click="Header, go to notifications, icon:read" data-channel="notification-changed:33718000" href="/notifications">
        <span class="mail-status "></span>
        <svg class="octicon octicon-bell" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M13.99 11.991v1H0v-1l.73-.58c.769-.769.809-2.547 1.189-4.416.77-3.767 4.077-4.996 4.077-4.996 0-.55.45-1 .999-1 .55 0 1 .45 1 1 0 0 3.387 1.229 4.156 4.996.38 1.879.42 3.657 1.19 4.417l.659.58h-.01zM6.995 15.99c1.11 0 1.999-.89 1.999-1.999H4.996c0 1.11.89 1.999 1.999 1.999z"/></svg>
</a>
    </span>
  </li>

  <li class="dropdown">
    <details class="details-overlay details-reset d-flex px-2 flex-items-center">
      <summary class="HeaderNavlink"
         aria-label="Create new…"
         data-ga-click="Header, create new, icon:add">
        <svg class="octicon octicon-plus float-left mr-1 mt-1" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5v2z"/></svg>
        <span class="dropdown-caret mt-1"></span>
      </summary>
      <details-menu class="dropdown-menu dropdown-menu-sw">
        
<a role="menuitem" class="dropdown-item" href="/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a role="menuitem" class="dropdown-item" href="/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a role="menuitem" class="dropdown-item" href="/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>


  <div class="dropdown-divider"></div>
  <div class="dropdown-header">
    <span title="futurepress/epub.js">This repository</span>
  </div>
    <a role="menuitem" class="dropdown-item" href="/futurepress/epub.js/issues/new" data-ga-click="Header, create new issue">
      New issue
    </a>

      </details-menu>
    </details>
  </li>

  <li class="dropdown">

    <details class="details-overlay details-reset d-flex pl-2 flex-items-center">
      <summary class="HeaderNavlink name mt-1"
        aria-label="View profile and more"
        data-ga-click="Header, show menu, icon:avatar">
        <img alt="@AK0088154" class="avatar float-left mr-1" src="https://avatars2.githubusercontent.com/u/33718000?s=40&amp;v=4" height="20" width="20">
        <span class="dropdown-caret"></span>
      </summary>
      <details-menu class="dropdown-menu dropdown-menu-sw">
        <ul>
          <li class="dropdown-header header-nav-current-user css-truncate">
            Signed in as <strong class="css-truncate-target">AK0088154</strong>
          </li>
          <li class="dropdown-divider"></li>
          <li><a role="menuitem" class="dropdown-item" href="/AK0088154" data-ga-click="Header, go to profile, text:your profile">Your profile</a></li>
          <li><a role="menuitem" class="dropdown-item" href="/AK0088154?tab=stars" data-ga-click="Header, go to starred repos, text:your stars">Your stars</a></li>
            <li><a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, your gists, text:your gists">Your gists</a></li>
          <li class="dropdown-divider"></li>
          <li><a role="menuitem" class="dropdown-item" href="https://help.github.com" data-ga-click="Header, go to help, text:help">Help</a></li>
          <li><a role="menuitem" class="dropdown-item" href="/settings/profile" data-ga-click="Header, go to settings, icon:settings">Settings</a></li>
          <li>
            <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="logout-form" action="/logout" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="++5NTJLXuqP+nrtBeTGFYX4GIaZ4MuLc5PW5gatqta8zf6S+23ZjGhYIDGS7p8Puppp24h/XRo+lYyMWRrHoJg==" />
              <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout" role="menuitem">
                Sign out
              </button>
</form>          </li>
        </ul>
      </details-menu>
    </details>
  </li>
</ul>



        <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="sr-only right-0" action="/logout" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="xIKUsL34j9fhZuEobbev45W+y+9pkAqlup+i8I8d0CAME31C9FlWbgnwVg2vIelsTSKcqw51rvb7CThnYsaNqQ==" />
          <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout">
            Sign out
          </button>
</form>      </div>
    </div>
  </div>
</header>

      

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">
</div>



  <div role="main" class="application-main ">
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container >
      





  



  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">
  <li>
        <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-autosubmit="true" data-remote="true" class="js-social-container" action="/notifications/subscribe" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="rwE/HyWvJy9MO889UCK1BBo44nSB22oMh88e7ksWOi0oeJj0rAXAvpTzREdvyBwzra+9CJ4cp8+pSKBwrP0/ag==" />      <input type="hidden" name="repository_id" id="repository_id" value="6418762" class="form-control" />

        <div class="select-menu js-menu-container js-select-menu">
          <a href="/futurepress/epub.js/subscription"
            class="btn btn-sm btn-with-count select-menu-button js-menu-target"
            role="button"
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Toggle repository notifications menu"
            data-ga-click="Repository, click Watch settings, action:blob#show">
            <span class="js-select-button">
                <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                Watch
            </span>
          </a>
          <a class="social-count js-social-count"
            href="/futurepress/epub.js/watchers"
            aria-label="167 users are watching this repository">
            167
          </a>

        <div class="select-menu-modal-holder">
          <div class="select-menu-modal subscription-menu-modal js-menu-content">
            <div class="select-menu-header js-navigation-enable" tabindex="-1">
              <svg class="octicon octicon-x js-menu-close" role="img" aria-label="Close" viewBox="0 0 12 16" version="1.1" width="12" height="16"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
              <span class="select-menu-title">Notifications</span>
            </div>

              <div class="select-menu-list js-navigation-container" role="menu">

                <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
                  <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
                  <div class="select-menu-item-text">
                    <input type="radio" name="do" id="do_included" value="included" checked="checked" />
                    <span class="select-menu-item-heading">Not watching</span>
                    <span class="description">Be notified when participating or @mentioned.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                      Watch
                    </span>
                  </div>
                </div>

                <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
                  <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
                  <div class="select-menu-item-text">
                    <input type="radio" name="do" id="do_subscribed" value="subscribed" />
                    <span class="select-menu-item-heading">Watching</span>
                    <span class="description">Be notified of all conversations.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                        Unwatch
                    </span>
                  </div>
                </div>

                <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
                  <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
                  <div class="select-menu-item-text">
                    <input type="radio" name="do" id="do_ignore" value="ignore" />
                    <span class="select-menu-item-heading">Ignoring</span>
                    <span class="description">Never be notified.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg class="octicon octicon-mute" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"/></svg>
                        Stop ignoring
                    </span>
                  </div>
                </div>

              </div>

            </div>
          </div>
        </div>
</form>
  </li>

  <li>
    
  <div class="js-toggler-container js-social-container starring-container ">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="starred js-social-form" action="/futurepress/epub.js/unstar" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="oJXt6OwS8gcPOs7bU1uycG/cd2AmWdaG+CrOoMQMZbWuEvuylgh8hzroWMetQo5vcHv3OZ914QGOM7mmV5jduA==" />
      <input type="hidden" name="context" value="repository"></input>
      <button
        type="submit"
        class="btn btn-sm btn-with-count js-toggler-target"
        aria-label="Unstar this repository" title="Unstar futurepress/epub.js"
        data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar">
        <svg class="octicon octicon-star" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"/></svg>
        Unstar
      </button>
        <a class="social-count js-social-count" href="/futurepress/epub.js/stargazers"
           aria-label="2360 users starred this repository">
          2,360
        </a>
</form>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="unstarred js-social-form" action="/futurepress/epub.js/star" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="LPxqUBR/8iTTP7NxFzbuCfbQk0VSoK+tXNZzt2lOEvwNK1bUzUOtHpBjwEYlwxIP0R3u/a8OSqR5xStJrsYcnQ==" />
      <input type="hidden" name="context" value="repository"></input>
      <button
        type="submit"
        class="btn btn-sm btn-with-count js-toggler-target"
        aria-label="Star this repository" title="Star futurepress/epub.js"
        data-ga-click="Repository, click star button, action:blob#show; text:Star">
        <svg class="octicon octicon-star" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"/></svg>
        Star
      </button>
        <a class="social-count js-social-count" href="/futurepress/epub.js/stargazers"
           aria-label="2360 users starred this repository">
          2,360
        </a>
</form>  </div>

  </li>

  <li>
          <details class="details-reset details-overlay details-overlay-dark d-inline-block float-left"
            data-deferred-details-content-url="/futurepress/epub.js/fork?fragment=1">
            <summary class="btn btn-sm btn-with-count"
              title="Fork your own copy of futurepress/epub.js to your account"
              data-ga-click="Repository, show fork modal, action:blob#show; text:Fork">
              Fork
            </summary>
            <details-dialog class="anim-fade-in fast Box Box--overlay d-flex flex-column">
              <div class="Box-header">
                <button class="Box-btn-octicon btn-octicon float-right" type="button" aria-label="Close dialog" data-close-dialog>
                  <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
                </button>
                <h3 class="Box-title">Where should we fork this repository?</h3>
              </div>
              <div class="Box-body overflow-auto text-center">
                <include-fragment>
                  <div class="octocat-spinner my-3" aria-label="Loading..."></div>
                  <p class="f5 text-gray">If this dialog fails to load, you can visit <a href="/futurepress/epub.js/fork">the fork page</a> directly.</p>
                </include-fragment>
              </div>
            </details-dialog>
          </details>

    <a href="/futurepress/epub.js/network" class="social-count"
       aria-label="553 users forked this repository">
      553
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" href="/futurepress">futurepress</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="/futurepress/epub.js">epub.js</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
     role="navigation"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /futurepress/epub.js/tree/v0.2.19" href="/futurepress/epub.js/tree/v0.2.19">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /futurepress/epub.js/issues" href="/futurepress/epub.js/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">166</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /futurepress/epub.js/pulls" href="/futurepress/epub.js/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">1</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /futurepress/epub.js/projects" href="/futurepress/epub.js/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      Projects
      <span class="Counter" >2</span>
</a>
    <a class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /futurepress/epub.js/wiki" href="/futurepress/epub.js/wiki">
      <svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"/></svg>
      Wiki
</a>

  <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse /futurepress/epub.js/pulse" href="/futurepress/epub.js/pulse">
    <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
    Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
  <a class="d-none js-permalink-shortcut" data-hotkey="y" href="/futurepress/epub.js/blob/d1261579997eba793544b10fffaa7f62a478b1cc/build/epub.min.js">Permalink</a>

  <!-- blob contrib key: blob_contributors:v21:fc96a83d3fa553eaf683906b9eb33e94 -->

  

  <div class="file-navigation">
    
<div class="select-menu branch-select-menu js-menu-container js-select-menu float-left">
  <button class=" btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w"
    
    type="button" aria-label="Switch branches or tags" aria-expanded="false" aria-haspopup="true">
      <i>Tag:</i>
      <span class="js-select-button css-truncate-target">v0.2.19</span>
  </button>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax>

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <svg class="octicon octicon-x js-menu-close" role="img" aria-label="Close" viewBox="0 0 12 16" version="1.1" width="12" height="16"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
        <span class="select-menu-title">Switch branches/tags</span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/browserify/build/epub.min.js"
               data-name="browserify"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                browserify
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/epubReadingSystem/build/epub.min.js"
               data-name="epubReadingSystem"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                epubReadingSystem
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/events_const/build/epub.min.js"
               data-name="events_const"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                events_const
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/gh-pages/build/epub.min.js"
               data-name="gh-pages"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                gh-pages
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/hypothesis-oa/build/epub.min.js"
               data-name="hypothesis-oa"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                hypothesis-oa
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/hypothesis/build/epub.min.js"
               data-name="hypothesis"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                hypothesis
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/ignore_class/build/epub.min.js"
               data-name="ignore_class"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                ignore_class
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/inline/build/epub.min.js"
               data-name="inline"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                inline
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/json_manifest/build/epub.min.js"
               data-name="json_manifest"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                json_manifest
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/landmarks/build/epub.min.js"
               data-name="landmarks"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                landmarks
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/master/build/epub.min.js"
               data-name="master"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                master
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/offline/build/epub.min.js"
               data-name="offline"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                offline
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/rtl_support/build/epub.min.js"
               data-name="rtl_support"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                rtl_support
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/stage_scale/build/epub.min.js"
               data-name="stage_scale"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                stage_scale
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/storage/build/epub.min.js"
               data-name="storage"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                storage
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/update_documentation/build/epub.min.js"
               data-name="update_documentation"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                update_documentation
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/v0.1/build/epub.min.js"
               data-name="v0.1"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                v0.1
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/v0.2/build/epub.min.js"
               data-name="v0.2"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                v0.2
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/v0.3/build/epub.min.js"
               data-name="v0.3"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                v0.3
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/v0.4/build/epub.min.js"
               data-name="v0.4"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                v0.4
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/vertical_writing/build/epub.min.js"
               data-name="vertical_writing"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                vertical_writing
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/futurepress/epub.js/blob/view_managers/build/epub.min.js"
               data-name="view_managers"
               data-skip-pjax="true"
               rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                view_managers
              </span>
            </a>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open selected"
              href="/futurepress/epub.js/tree/v0.2.19/build/epub.min.js"
              data-name="v0.2.19"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.19">
                v0.2.19
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.18/build/epub.min.js"
              data-name="v0.2.18"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.18">
                v0.2.18
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.17/build/epub.min.js"
              data-name="v0.2.17"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.17">
                v0.2.17
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.15/build/epub.min.js"
              data-name="v0.2.15"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.15">
                v0.2.15
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.14/build/epub.min.js"
              data-name="v0.2.14"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.14">
                v0.2.14
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.13/build/epub.min.js"
              data-name="v0.2.13"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.13">
                v0.2.13
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.12/build/epub.min.js"
              data-name="v0.2.12"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.12">
                v0.2.12
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.11/build/epub.min.js"
              data-name="v0.2.11"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.11">
                v0.2.11
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.10/build/epub.min.js"
              data-name="v0.2.10"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.10">
                v0.2.10
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.3/build/epub.min.js"
              data-name="v0.2.3"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.3">
                v0.2.3
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.2/build/epub.min.js"
              data-name="v0.2.2"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.2">
                v0.2.2
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.1/build/epub.min.js"
              data-name="v0.2.1"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.1">
                v0.2.1
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.0.1/build/epub.min.js"
              data-name="v0.2.0.1"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.0.1">
                v0.2.0.1
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.2.0/build/epub.min.js"
              data-name="v0.2.0"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.2.0">
                v0.2.0
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.1.9/build/epub.min.js"
              data-name="v0.1.9"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.1.9">
                v0.1.9
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.1.8/build/epub.min.js"
              data-name="v0.1.8"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.1.8">
                v0.1.8
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.1.7/build/epub.min.js"
              data-name="v0.1.7"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.1.7">
                v0.1.7
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.1.6/build/epub.min.js"
              data-name="v0.1.6"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.1.6">
                v0.1.6
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/v0.1.5/build/epub.min.js"
              data-name="v0.1.5"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="v0.1.5">
                v0.1.5
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/alpha-0.3.1/build/epub.min.js"
              data-name="alpha-0.3.1"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="alpha-0.3.1">
                alpha-0.3.1
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/0.2.9/build/epub.min.js"
              data-name="0.2.9"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="0.2.9">
                0.2.9
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/0.2.8.1/build/epub.min.js"
              data-name="0.2.8.1"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="0.2.8.1">
                0.2.8.1
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/0.2.8/build/epub.min.js"
              data-name="0.2.8"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="0.2.8">
                0.2.8
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/0.2.7/build/epub.min.js"
              data-name="0.2.7"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="0.2.7">
                0.2.7
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/0.2.5/build/epub.min.js"
              data-name="0.2.5"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="0.2.5">
                0.2.5
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/0.2.4/build/epub.min.js"
              data-name="0.2.4"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="0.2.4">
                0.2.4
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/0.1.10/build/epub.min.js"
              data-name="0.1.10"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="0.1.10">
                0.1.10
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
              href="/futurepress/epub.js/tree/0.1.8/build/epub.min.js"
              data-name="0.1.8"
              data-skip-pjax="true"
              rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"/></svg>
              <span class="select-menu-item-text css-truncate-target" title="0.1.8">
                0.1.8
              </span>
            </a>
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>

    <div class="BtnGroup float-right">
      <a href="/futurepress/epub.js/find/v0.2.19"
            class="js-pjax-capture-input btn btn-sm BtnGroup-item"
            data-pjax
            data-hotkey="t">
        Find file
      </a>
      <clipboard-copy for="blob-path" class="btn btn-sm BtnGroup-item">
        Copy path
      </clipboard-copy>
    </div>
    <div id="blob-path" class="breadcrumb">
      <span class="repo-root js-repo-root"><span class="js-path-segment"><a data-pjax="true" href="/futurepress/epub.js/tree/v0.2.19"><span>epub.js</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a data-pjax="true" href="/futurepress/epub.js/tree/v0.2.19/build"><span>build</span></a></span><span class="separator">/</span><strong class="final-path">epub.min.js</strong>
    </div>
  </div>


  <include-fragment src="/futurepress/epub.js/contributors/v0.2.19/build/epub.min.js" class="commit-tease commit-loader">
    <div>
      Fetching contributors&hellip;
    </div>

    <div class="commit-tease-contributors">
        <img alt="" class="loader-loading float-left" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32-EAF2F5.gif" width="16" height="16" />
      <span class="loader-error">Cannot retrieve contributors at this time</span>
    </div>
</include-fragment>


  <div class="file">
    <div class="file-header">
  <div class="file-actions">

    <div class="BtnGroup">
      <a id="raw-url" class="btn btn-sm BtnGroup-item" href="/futurepress/epub.js/raw/v0.2.19/build/epub.min.js">Raw</a>
        <a class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b" href="/futurepress/epub.js/blame/v0.2.19/build/epub.min.js">Blame</a>
      <a rel="nofollow" class="btn btn-sm BtnGroup-item" href="/futurepress/epub.js/commits/v0.2.19/build/epub.min.js">History</a>
    </div>

        <button class="btn-octicon disabled tooltipped tooltipped-nw"
           type="button"
           disabled
           aria-label="You must be on a branch to open this file in GitHub Desktop">
            <svg class="octicon octicon-device-desktop" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M15 2H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5.34c-.25.61-.86 1.39-2.34 2h8c-1.48-.61-2.09-1.39-2.34-2H15c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 9H1V3h14v8z"/></svg>
        </button>

        <button type="button" class="btn-octicon disabled tooltipped tooltipped-nw"
          aria-label="You must be on a branch to make or propose changes to this file">
          <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>
        </button>
        <button type="button" class="btn-octicon btn-octicon-danger disabled tooltipped tooltipped-nw"
          aria-label="You must be on a branch to make or propose changes to this file">
          <svg class="octicon octicon-trashcan" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"/></svg>
        </button>
  </div>

  <div class="file-info">
      8 lines (8 sloc)
      <span class="file-info-divider"></span>
    100 KB
  </div>
</div>

    

  <div itemprop="text" class="blob-wrapper data type-javascript">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="LC1" class="blob-code blob-code-inner js-file-line">/*!</td>
      </tr>
      <tr>
        <td id="L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="LC2" class="blob-code blob-code-inner js-file-line"> * @overview RSVP - a tiny implementation of Promises/A+.</td>
      </tr>
      <tr>
        <td id="L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="LC3" class="blob-code blob-code-inner js-file-line"> * @copyright Copyright (c) 2016 Yehuda Katz, Tom Dale, Stefan Penner and contributors</td>
      </tr>
      <tr>
        <td id="L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="LC4" class="blob-code blob-code-inner js-file-line"> * @license   Licensed under MIT license</td>
      </tr>
      <tr>
        <td id="L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="LC5" class="blob-code blob-code-inner js-file-line"> *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE</td>
      </tr>
      <tr>
        <td id="L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="LC6" class="blob-code blob-code-inner js-file-line"> * @version   3.5.0</td>
      </tr>
      <tr>
        <td id="L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="LC7" class="blob-code blob-code-inner js-file-line"> */</td>
      </tr>
      <tr>
        <td id="L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="LC8" class="blob-code blob-code-inner js-file-line">&quot;use strict&quot;;!function(a,b){&quot;object&quot;==typeof exports&amp;&amp;&quot;undefined&quot;!=typeof module?b(exports):&quot;function&quot;==typeof define&amp;&amp;define.amd?define([&quot;exports&quot;],b):b(a.RSVP=a.RSVP||{})}(this,function(a){function b(a,b){for(var c=0,d=a.length;c&lt;d;c++)if(a[c]===b)return c;return-1}function c(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b}function d(a,b){return&quot;onerror&quot;===a?void va.on(&quot;error&quot;,b):2!==arguments.length?va[a]:void(va[a]=b)}function e(a){return&quot;function&quot;==typeof a||&quot;object&quot;==typeof a&amp;&amp;null!==a}function f(a){return&quot;function&quot;==typeof a}function g(a){return&quot;object&quot;==typeof a&amp;&amp;null!==a}function h(){}function i(){setTimeout(function(){for(var a=0;a&lt;Aa.length;a++){var b=Aa[a],c=b.payload;c.guid=c.key+c.id,c.childGuid=c.key+c.childId,c.error&amp;&amp;(c.stack=c.error.stack),va.trigger(b.name,b.payload)}Aa.length=0},50)}function j(a,b,c){1===Aa.push({name:a,payload:{key:b._guidKey,id:b._id,eventName:a,detail:b._result,childId:c&amp;&amp;c._id,label:b._label,timeStamp:ya(),error:va[&quot;instrument-with-stack&quot;]?new Error(b._label):null}})&amp;&amp;i()}function k(a,b){var c=this;if(a&amp;&amp;&quot;object&quot;==typeof a&amp;&amp;a.constructor===c)return a;var d=new c(m,b);return s(d,a),d}function l(){return new TypeError(&quot;A promises callback cannot return that same promise.&quot;)}function m(){}function n(a){try{return a.then}catch(a){return Ea.error=a,Ea}}function o(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function p(a,b,c){va.async(function(a){var d=!1,e=o(c,b,function(c){d||(d=!0,b!==c?s(a,c,void 0):u(a,c))},function(b){d||(d=!0,v(a,b))},&quot;Settle: &quot;+(a._label||&quot; unknown promise&quot;));!d&amp;&amp;e&amp;&amp;(d=!0,v(a,e))},a)}function q(a,b){b._state===Ca?u(a,b._result):b._state===Da?(b._onError=null,v(a,b._result)):w(b,void 0,function(c){b!==c?s(a,c,void 0):u(a,c)},function(b){return v(a,b)})}function r(a,b,c){b.constructor===a.constructor&amp;&amp;c===C&amp;&amp;a.constructor.resolve===k?q(a,b):c===Ea?(v(a,Ea.error),Ea.error=null):void 0===c?u(a,b):f(c)?p(a,b,c):u(a,b)}function s(a,b){a===b?u(a,b):e(b)?r(a,b,n(b)):u(a,b)}function t(a){a._onError&amp;&amp;a._onError(a._result),x(a)}function u(a,b){a._state===Ba&amp;&amp;(a._result=b,a._state=Ca,0===a._subscribers.length?va.instrument&amp;&amp;j(&quot;fulfilled&quot;,a):va.async(x,a))}function v(a,b){a._state===Ba&amp;&amp;(a._state=Da,a._result=b,va.async(t,a))}function w(a,b,c,d){var e=a._subscribers,f=e.length;a._onError=null,e[f]=b,e[f+Ca]=c,e[f+Da]=d,0===f&amp;&amp;a._state&amp;&amp;va.async(x,a)}function x(a){var b=a._subscribers,c=a._state;if(va.instrument&amp;&amp;j(c===Ca?&quot;fulfilled&quot;:&quot;rejected&quot;,a),0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g&lt;b.length;g+=3)d=b[g],e=b[g+c],d?A(c,d,e,f):e(f);a._subscribers.length=0}}function y(){this.error=null}function z(a,b){try{return a(b)}catch(a){return Fa.error=a,Fa}}function A(a,b,c,d){var e=f(c),g=void 0,h=void 0,i=void 0,j=void 0;if(e){if(g=z(c,d),g===Fa?(j=!0,h=g.error,g.error=null):i=!0,b===g)return void v(b,l())}else g=d,i=!0;b._state!==Ba||(e&amp;&amp;i?s(b,g):j?v(b,h):a===Ca?u(b,g):a===Da&amp;&amp;v(b,g))}function B(a,b){var c=!1;try{b(function(b){c||(c=!0,s(a,b))},function(b){c||(c=!0,v(a,b))})}catch(b){v(a,b)}}function C(a,b,c){var d=arguments,e=this,f=e._state;if(f===Ca&amp;&amp;!a||f===Da&amp;&amp;!b)return va.instrument&amp;&amp;j(&quot;chained&quot;,e,e),e;e._onError=null;var g=new e.constructor(m,c),h=e._result;return va.instrument&amp;&amp;j(&quot;chained&quot;,e,g),f?function(){var a=d[f-1];va.async(function(){return A(f,g,a,h)})}():w(e,g,a,b),g}function D(a,b,c){return a===Ca?{state:&quot;fulfilled&quot;,value:c}:{state:&quot;rejected&quot;,reason:c}}function E(a,b,c,d){this._instanceConstructor=a,this.promise=new a(m,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?u(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&amp;&amp;u(this.promise,this._result))):v(this.promise,this._validationError())}function F(a,b){return new E(this,a,!0,b).promise}function G(a,b){var c=this,d=new c(m,b);if(!xa(a))return v(d,new TypeError(&quot;You must pass an array to race.&quot;)),d;for(var e=0;d._state===Ba&amp;&amp;e&lt;a.length;e++)w(c.resolve(a[e]),void 0,function(a){return s(d,a)},function(a){return v(d,a)});return d}function H(a,b){var c=this,d=new c(m,b);return v(d,a),d}function I(){throw new TypeError(&quot;You must pass a resolver function as the first argument to the promise constructor&quot;)}function J(){throw new TypeError(&quot;Failed to construct &#39;Promise&#39;: Please use the &#39;new&#39; operator, this object constructor cannot be called as a function.&quot;)}function K(a,b){this._id=Ha++,this._label=b,this._state=void 0,this._result=void 0,this._subscribers=[],va.instrument&amp;&amp;j(&quot;created&quot;,this),m!==a&amp;&amp;(&quot;function&quot;!=typeof a&amp;&amp;I(),this instanceof K?B(this,a):J())}function L(){this.value=void 0}function M(a){try{return a.then}catch(a){return Ia.value=a,Ia}}function N(a,b,c){try{a.apply(b,c)}catch(a){return Ia.value=a,Ia}}function O(a,b){for(var c={},d=a.length,e=new Array(d),f=0;f&lt;d;f++)e[f]=a[f];for(var g=0;g&lt;b.length;g++){c[b[g]]=e[g+1]}return c}function P(a){for(var b=a.length,c=new Array(b-1),d=1;d&lt;b;d++)c[d-1]=a[d];return c}function Q(a,b){return{then:function(c,d){return a.call(b,c,d)}}}function R(a,b){var c=function(){for(var c=this,d=arguments.length,e=new Array(d+1),f=!1,g=0;g&lt;d;++g){var h=arguments[g];if(!f){if((f=U(h))===Ja){var i=new K(m);return v(i,Ja.value),i}f&amp;&amp;f!==!0&amp;&amp;(h=Q(f,h))}e[g]=h}var j=new K(m);return e[d]=function(a,c){a?v(j,a):void 0===b?s(j,c):b===!0?s(j,P(arguments)):xa(b)?s(j,O(arguments,b)):s(j,c)},f?T(j,e,a,c):S(j,e,a,c)};return c.__proto__=a,c}function S(a,b,c,d){var e=N(c,d,b);return e===Ia&amp;&amp;v(a,e.value),a}function T(a,b,c,d){return K.all(b).then(function(b){var e=N(c,d,b);return e===Ia&amp;&amp;v(a,e.value),a})}function U(a){return!(!a||&quot;object&quot;!=typeof a)&amp;&amp;(a.constructor===K||M(a))}function V(a,b){return K.all(a,b)}function W(a,b,c){this._superConstructor(a,b,!1,c)}function X(a,b){return new W(K,a,b).promise}function Y(a,b){return K.race(a,b)}function Z(a,b,c){this._superConstructor(a,b,!0,c)}function $(a,b){return new Z(K,a,b).promise}function _(a,b,c){this._superConstructor(a,b,!1,c)}function aa(a,b){return new _(K,a,b).promise}function ba(a){throw setTimeout(function(){throw a}),a}function ca(a){var b={resolve:void 0,reject:void 0};return b.promise=new K(function(a,c){b.resolve=a,b.reject=c},a),b}function da(a,b,c){return K.all(a,c).then(function(a){if(!f(b))throw new TypeError(&quot;You must pass a function as map&#39;s second argument.&quot;);for(var d=a.length,e=new Array(d),g=0;g&lt;d;g++)e[g]=b(a[g]);return K.all(e,c)})}function ea(a,b){return K.resolve(a,b)}function fa(a,b){return K.reject(a,b)}function ga(a,b){return K.all(a,b)}function ha(a,b){return K.resolve(a,b).then(function(a){return ga(a,b)})}function ia(a,b,c){return(xa(a)?ga(a,c):ha(a,c)).then(function(a){if(!f(b))throw new TypeError(&quot;You must pass a function as filter&#39;s second argument.&quot;);for(var d=a.length,e=new Array(d),g=0;g&lt;d;g++)e[g]=b(a[g]);return ga(e,c).then(function(b){for(var c=new Array(d),e=0,f=0;f&lt;d;f++)b[f]&amp;&amp;(c[e]=a[f],e++);return c.length=e,c})})}function ja(a,b){Ra[Ka]=a,Ra[Ka+1]=b,2===(Ka+=2)&amp;&amp;Sa()}function ka(){var a=process.nextTick,b=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&amp;&amp;&quot;0&quot;===b[1]&amp;&amp;&quot;10&quot;===b[2]&amp;&amp;(a=setImmediate),function(){return a(pa)}}function la(){return void 0!==La?function(){La(pa)}:oa()}function ma(){var a=0,b=new Oa(pa),c=document.createTextNode(&quot;&quot;);return b.observe(c,{characterData:!0}),function(){return c.data=a=++a%2}}function na(){var a=new MessageChannel;return a.port1.onmessage=pa,function(){return a.port2.postMessage(0)}}function oa(){return function(){return setTimeout(pa,1)}}function pa(){for(var a=0;a&lt;Ka;a+=2){(0,Ra[a])(Ra[a+1]),Ra[a]=void 0,Ra[a+1]=void 0}Ka=0}function qa(){try{var a=require,b=a(&quot;vertx&quot;);return La=b.runOnLoop||b.runOnContext,la()}catch(a){return oa()}}function ra(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function sa(){va.on.apply(va,arguments)}function ta(){va.off.apply(va,arguments)}var ua={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,d){if(&quot;function&quot;!=typeof d)throw new TypeError(&quot;Callback must be a function&quot;);var e=c(this),f=void 0;f=e[a],f||(f=e[a]=[]),b(f,d)===-1&amp;&amp;f.push(d)},off:function(a,d){var e=c(this),f=void 0,g=void 0;if(!d)return void(e[a]=[]);f=e[a],(g=b(f,d))!==-1&amp;&amp;f.splice(g,1)},trigger:function(a,b,d){var e=c(this),f=void 0;if(f=e[a])for(var g=0;g&lt;f.length;g++)(0,f[g])(b,d)}},va={instrument:!1};ua.mixin(va);var wa=void 0;wa=Array.isArray?Array.isArray:function(a){return&quot;[object Array]&quot;===Object.prototype.toString.call(a)};var xa=wa,ya=Date.now||function(){return(new Date).getTime()},za=Object.create||function(a){if(arguments.length&gt;1)throw new Error(&quot;Second argument not supported&quot;);if(&quot;object&quot;!=typeof a)throw new TypeError(&quot;Argument must be an object&quot;);return h.prototype=a,new h},Aa=[],Ba=void 0,Ca=1,Da=2,Ea=new y,Fa=new y;E.prototype._validateInput=function(a){return xa(a)},E.prototype._validationError=function(){return new Error(&quot;Array Methods must be provided an Array&quot;)},E.prototype._init=function(){this._result=new Array(this.length)},E.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===Ba&amp;&amp;d&lt;a;d++)this._eachEntry(c[d],d)},E.prototype._settleMaybeThenable=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===k){var e=n(a);if(e===C&amp;&amp;a._state!==Ba)a._onError=null,this._settledAt(a._state,b,a._result);else if(&quot;function&quot;!=typeof e)this._remaining--,this._result[b]=this._makeResult(Ca,b,a);else if(c===K){var f=new c(m);r(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},E.prototype._eachEntry=function(a,b){g(a)?this._settleMaybeThenable(a,b):(this._remaining--,this._result[b]=this._makeResult(Ca,b,a))},E.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===Ba&amp;&amp;(this._remaining--,this._abortOnReject&amp;&amp;a===Da?v(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&amp;&amp;u(d,this._result)},E.prototype._makeResult=function(a,b,c){return c},E.prototype._willSettleAt=function(a,b){var c=this;w(a,void 0,function(a){return c._settledAt(Ca,b,a)},function(a){return c._settledAt(Da,b,a)})};var Ga=&quot;rsvp_&quot;+ya()+&quot;-&quot;,Ha=0;K.cast=k,K.all=F,K.race=G,K.resolve=k,K.reject=H,K.prototype={constructor:K,_guidKey:Ga,_onError:function(a){var b=this;va.after(function(){b._onError&amp;&amp;va.trigger(&quot;error&quot;,a,b._label)})},then:C,catch:function(a,b){return this.then(void 0,a,b)},finally:function(a,b){var c=this,d=c.constructor;return c.then(function(b){return d.resolve(a()).then(function(){return b})},function(b){return d.resolve(a()).then(function(){throw b})},b)}};var Ia=new L,Ja=new L;W.prototype=za(E.prototype),W.prototype._superConstructor=E,W.prototype._makeResult=D,W.prototype._validationError=function(){return new Error(&quot;allSettled must be called with an array&quot;)},Z.prototype=za(E.prototype),Z.prototype._superConstructor=E,Z.prototype._init=function(){this._result={}},Z.prototype._validateInput=function(a){return a&amp;&amp;&quot;object&quot;==typeof a},Z.prototype._validationError=function(){return new Error(&quot;Promise.hash must be called with an object&quot;)},Z.prototype._enumerate=function(){var a=this,b=a.promise,c=a._input,d=[];for(var e in c)b._state===Ba&amp;&amp;Object.prototype.hasOwnProperty.call(c,e)&amp;&amp;d.push({position:e,entry:c[e]});var f=d.length;a._remaining=f;for(var g=void 0,h=0;b._state===Ba&amp;&amp;h&lt;f;h++)g=d[h],a._eachEntry(g.entry,g.position)},_.prototype=za(Z.prototype),_.prototype._superConstructor=E,_.prototype._makeResult=D,_.prototype._validationError=function(){return new Error(&quot;hashSettled must be called with an object&quot;)};var Ka=0,La=void 0,Ma=&quot;undefined&quot;!=typeof window?window:void 0,Na=Ma||{},Oa=Na.MutationObserver||Na.WebKitMutationObserver,Pa=&quot;undefined&quot;==typeof self&amp;&amp;&quot;undefined&quot;!=typeof process&amp;&amp;&quot;[object process]&quot;==={}.toString.call(process),Qa=&quot;undefined&quot;!=typeof Uint8ClampedArray&amp;&amp;&quot;undefined&quot;!=typeof importScripts&amp;&amp;&quot;undefined&quot;!=typeof MessageChannel,Ra=new Array(1e3),Sa=void 0;Sa=Pa?ka():Oa?ma():Qa?na():void 0===Ma&amp;&amp;&quot;function&quot;==typeof require?qa():oa();if(&quot;object&quot;==typeof self)self;else{if(&quot;object&quot;!=typeof global)throw new Error(&quot;no global: `self` or `global` found&quot;);global}var Ta;va.async=ja,va.after=function(a){return setTimeout(a,0)};var Ua=ea,Va=function(a,b){return va.async(a,b)};if(&quot;undefined&quot;!=typeof window&amp;&amp;&quot;object&quot;==typeof window.__PROMISE_INSTRUMENTATION__){var Wa=window.__PROMISE_INSTRUMENTATION__;d(&quot;instrument&quot;,!0);for(var Xa in Wa)Wa.hasOwnProperty(Xa)&amp;&amp;sa(Xa,Wa[Xa])}var Ya=(Ta={asap:ja,cast:Ua,Promise:K,EventTarget:ua,all:V,allSettled:X,race:Y,hash:$,hashSettled:aa,rethrow:ba,defer:ca,denodeify:R,configure:d,on:sa,off:ta,resolve:ea,reject:fa,map:da},ra(Ta,&quot;async&quot;,Va),ra(Ta,&quot;filter&quot;,ia),Ta);a.default=Ya,a.asap=ja,a.cast=Ua,a.Promise=K,a.EventTarget=ua,a.all=V,a.allSettled=X,a.race=Y,a.hash=$,a.hashSettled=aa,a.rethrow=ba,a.defer=ca,a.denodeify=R,a.configure=d,a.on=sa,a.off=ta,a.resolve=ea,a.reject=fa,a.map=da,a.async=Va,a.filter=ia,Object.defineProperty(a,&quot;__esModule&quot;,{value:!0})});var EPUBJS=EPUBJS||{};EPUBJS.VERSION=&quot;0.2.19&quot;,EPUBJS.plugins=EPUBJS.plugins||{},EPUBJS.filePath=EPUBJS.filePath||&quot;/epubjs/&quot;,EPUBJS.Render={},function(a){var b=(a.ePub,a.ePub=function(){var a,b;return void 0!==arguments[0]&amp;&amp;(&quot;string&quot;==typeof arguments[0]||arguments[0]instanceof ArrayBuffer)&amp;&amp;(a=arguments[0],arguments[1]&amp;&amp;&quot;object&quot;==typeof arguments[1]?(b=arguments[1],b.bookPath=a):b={bookPath:a}),!arguments[0]||&quot;object&quot;!=typeof arguments[0]||arguments[0]instanceof ArrayBuffer||(b=arguments[0]),new EPUBJS.Book(b)});&quot;function&quot;==typeof define&amp;&amp;define.amd?define([&quot;rsvp&quot;,&quot;jszip&quot;,&quot;localforage&quot;],function(a,c,d){return b}):&quot;undefined&quot;!=typeof module&amp;&amp;module.exports&amp;&amp;(global.RSVP=require(&quot;rsvp&quot;),global.JSZip=require(&quot;jszip&quot;),global.localForage=require(&quot;localforage&quot;),module.exports=b)}(window),EPUBJS.Book=function(a){this.settings=EPUBJS.core.defaults(a||{},{bookPath:void 0,bookKey:void 0,packageUrl:void 0,storage:!1,fromStorage:!1,saved:!1,online:!0,contained:!1,width:void 0,height:void 0,layoutOveride:void 0,orientation:void 0,minSpreadWidth:768,gap:&quot;auto&quot;,version:1,restore:!1,reload:!1,goto:!1,styles:{},classes:[],headTags:{},withCredentials:!1,render_method:&quot;Iframe&quot;,displayLastPage:!1}),this.settings.EPUBJSVERSION=EPUBJS.VERSION,this.spinePos=0,this.stored=!1,this.online=this.settings.online||navigator.onLine,this.networkListeners(),this.ready={manifest:new RSVP.defer,spine:new RSVP.defer,metadata:new RSVP.defer,cover:new RSVP.defer,toc:new RSVP.defer,pageList:new RSVP.defer},this.readyPromises=[this.ready.manifest.promise,this.ready.spine.promise,this.ready.metadata.promise,this.ready.cover.promise,this.ready.toc.promise],this.pageList=[],this.pagination=new EPUBJS.Pagination,this.pageListReady=this.ready.pageList.promise,this.ready.all=RSVP.all(this.readyPromises),this.ready.all.then(this._ready.bind(this)),this.isRendered=!1,this._q=EPUBJS.core.queue(this),this._rendering=!1,this._displayQ=EPUBJS.core.queue(this),this._moving=!1,this._gotoQ=EPUBJS.core.queue(this),this.renderer=new EPUBJS.Renderer(this.settings.render_method),this.renderer.setMinSpreadWidth(this.settings.minSpreadWidth),this.renderer.setGap(this.settings.gap),this.listenToRenderer(this.renderer),this.defer_opened=new RSVP.defer,this.opened=this.defer_opened.promise,this.store=!1,this.settings.storage!==!1&amp;&amp;this.fromStorage(!0),(&quot;string&quot;==typeof this.settings.bookPath||this.settings.bookPath instanceof ArrayBuffer)&amp;&amp;this.open(this.settings.bookPath,this.settings.reload),window.addEventListener(&quot;beforeunload&quot;,this.unload.bind(this),!1)},EPUBJS.Book.prototype.open=function(a,b){var c,d=this,e=new RSVP.defer;return this.settings.bookPath=a,this.settings.contained||this.isContained(a)?(this.settings.contained=this.contained=!0,this.bookUrl=&quot;&quot;,c=this.unarchive(a).then(function(){return d.loadPackage()})):(this.bookUrl=this.urlFrom(a),c=this.loadPackage()),this.settings.restore&amp;&amp;!b&amp;&amp;localStorage?c.then(function(a){var b=d.packageIdentifier(a);d.restore(b)||d.unpack(a),e.resolve(),d.defer_opened.resolve()}):c.then(function(a){d.unpack(a),e.resolve(),d.defer_opened.resolve()}),this._registerReplacements(this.renderer),e.promise},EPUBJS.Book.prototype.loadPackage=function(a){var b,c=this,d=new EPUBJS.Parser,e=a||&quot;META-INF/container.xml&quot;;return b=this.settings.packageUrl?c.loadXml(c.settings.packageUrl):c.loadXml(c.bookUrl+e).then(function(a){return d.container(a)}).then(function(a){return c.settings.contentsPath=c.bookUrl+a.basePath,c.settings.packageUrl=c.bookUrl+a.packagePath,c.settings.encoding=a.encoding,c.loadXml(c.settings.packageUrl)}),b.catch(function(a){console.error(&quot;Could not load book at: &quot;+e),c.trigger(&quot;book:loadFailed&quot;,e)}),b},EPUBJS.Book.prototype.packageIdentifier=function(a){return(new EPUBJS.Parser).identifier(a)},EPUBJS.Book.prototype.unpack=function(a){var b=this,c=new EPUBJS.Parser;b.contents=c.packageContents(a,b.settings.contentsPath),b.manifest=b.contents.manifest,b.spine=b.contents.spine,b.spineIndexByURL=b.contents.spineIndexByURL,b.metadata=b.contents.metadata,b.settings.bookKey||(b.settings.bookKey=b.generateBookKey(b.metadata.identifier)),b.globalLayoutProperties=b.parseLayoutProperties(b.metadata),b.contents.coverPath&amp;&amp;(b.cover=b.contents.cover=b.settings.contentsPath+b.contents.coverPath),b.spineNodeIndex=b.contents.spineNodeIndex,b.ready.manifest.resolve(b.contents.manifest),b.ready.spine.resolve(b.contents.spine),b.ready.metadata.resolve(b.contents.metadata),b.ready.cover.resolve(b.contents.cover),b.locations=new EPUBJS.Locations(b.spine,b.store,b.settings.withCredentials),b.contents.navPath?(b.settings.navUrl=b.settings.contentsPath+b.contents.navPath,b.loadXml(b.settings.navUrl).then(function(a){return c.nav(a,b.spineIndexByURL,b.spine)}).then(function(a){b.toc=b.contents.toc=a,b.ready.toc.resolve(b.contents.toc)},function(a){b.ready.toc.resolve(!1)}),b.loadXml(b.settings.navUrl).then(function(a){return c.pageList(a,b.spineIndexByURL,b.spine)}).then(function(a){var c=new EPUBJS.EpubCFI,d=0;0!==a.length&amp;&amp;(b.pageList=b.contents.pageList=a,b.pageList.forEach(function(a){a.cfi||(d+=1,c.generateCfiFromHref(a.href,b).then(function(c){a.cfi=c,a.packageUrl=b.settings.packageUrl,0===(d-=1)&amp;&amp;(b.pagination.process(b.pageList),b.ready.pageList.resolve(b.pageList))}))}),d||(b.pagination.process(b.pageList),b.ready.pageList.resolve(b.pageList)))},function(a){b.ready.pageList.resolve([])})):b.contents.tocPath?(b.settings.tocUrl=b.settings.contentsPath+b.contents.tocPath,b.loadXml(b.settings.tocUrl).then(function(a){return c.toc(a,b.spineIndexByURL,b.spine)},function(a){console.error(a)}).then(function(a){b.toc=b.contents.toc=a,b.ready.toc.resolve(b.contents.toc)},function(a){b.ready.toc.resolve(!1)})):b.ready.toc.resolve(!1)},EPUBJS.Book.prototype.createHiddenRender=function(a,b,c){var d,e,f=this.element.getBoundingClientRect(),g=b||this.settings.width||f.width,h=c||this.settings.height||f.height;return a.setMinSpreadWidth(this.settings.minSpreadWidth),a.setGap(this.settings.gap),this._registerReplacements(a),this.settings.forceSingle&amp;&amp;a.forceSingle(!0),d=document.createElement(&quot;div&quot;),d.style.visibility=&quot;hidden&quot;,d.style.overflow=&quot;hidden&quot;,d.style.width=&quot;0&quot;,d.style.height=&quot;0&quot;,this.element.appendChild(d),e=document.createElement(&quot;div&quot;),e.style.visibility=&quot;hidden&quot;,e.style.overflow=&quot;hidden&quot;,e.style.width=g+&quot;px&quot;,e.style.height=h+&quot;px&quot;,d.appendChild(e),a.initialize(e,this.settings.width,this.settings.height),d},EPUBJS.Book.prototype.generatePageList=function(a,b,c){var d=[],e=new EPUBJS.Renderer(this.settings.render_method,!1),f=this.createHiddenRender(e,a,b),g=new RSVP.defer,h=-1,i=this.spine.length,j=0,k=function(a){var b,g=h+1,l=a||new RSVP.defer;if(g&gt;=i)l.resolve();else{if(c&amp;&amp;c.cancelled)return e.remove(),this.element.removeChild(f),void l.reject(new Error(&quot;User cancelled&quot;));h=g,b=new EPUBJS.Chapter(this.spine[h],this.store),e.displayChapter(b,this.globalLayoutProperties).then(function(a){e.pageMap.forEach(function(a){j+=1,d.push({cfi:a.start,page:j})}),e.pageMap.length%2&gt;0&amp;&amp;e.spreads&amp;&amp;(j+=1,d.push({cfi:e.pageMap[e.pageMap.length-1].end,page:j})),setTimeout(function(){k(l)},1)})}return l.promise}.bind(this);k().then(function(){e.remove(),this.element.removeChild(f),g.resolve(d)}.bind(this),function(a){g.reject(a)});return g.promise},EPUBJS.Book.prototype.generatePagination=function(a,b,c){var d=this,e=new RSVP.defer;return this.ready.spine.promise.then(function(){d.generatePageList(a,b,c).then(function(a){d.pageList=d.contents.pageList=a,d.pagination.process(a),d.ready.pageList.resolve(d.pageList),e.resolve(d.pageList)},function(a){e.reject(a)})}),e.promise},EPUBJS.Book.prototype.loadPagination=function(a){var b;return b=&quot;string&quot;==typeof a?JSON.parse(a):a,b&amp;&amp;b.length&amp;&amp;(this.pageList=b,this.pagination.process(this.pageList),this.ready.pageList.resolve(this.pageList)),this.pageList},EPUBJS.Book.prototype.getPageList=function(){return this.ready.pageList.promise},EPUBJS.Book.prototype.getMetadata=function(){return this.ready.metadata.promise},EPUBJS.Book.prototype.getToc=function(){return this.ready.toc.promise},EPUBJS.Book.prototype.networkListeners=function(){var a=this;window.addEventListener(&quot;offline&quot;,function(b){a.online=!1,a.settings.storage&amp;&amp;a.fromStorage(!0),a.trigger(&quot;book:offline&quot;)},!1),window.addEventListener(&quot;online&quot;,function(b){a.online=!0,a.settings.storage&amp;&amp;a.fromStorage(!1),a.trigger(&quot;book:online&quot;)},!1)},EPUBJS.Book.prototype.listenToRenderer=function(a){var b=this;a.Events.forEach(function(c){a.on(c,function(a){b.trigger(c,a)})}),a.on(&quot;renderer:visibleRangeChanged&quot;,function(a){var b,c,d,e=[];this.pageList.length&gt;0&amp;&amp;(b=this.pagination.pageFromCfi(a.start),d=this.pagination.percentageFromPage(b),e.push(b),a.end&amp;&amp;(c=this.pagination.pageFromCfi(a.end),e.push(c)),this.trigger(&quot;book:pageChanged&quot;,{anchorPage:b,percentage:d,pageRange:e}))}.bind(this)),a.on(&quot;render:loaded&quot;,this.loadChange.bind(this))},EPUBJS.Book.prototype.loadChange=function(a){var b,c,d=EPUBJS.core.uri(a),e=EPUBJS.core.uri(this.currentChapter.absolute);d.path!=e.path?(console.warn(&quot;Miss Match&quot;,d.path,this.currentChapter.absolute),b=this.spineIndexByURL[d.filename],c=new EPUBJS.Chapter(this.spine[b],this.store),this.currentChapter=c,this.renderer.currentChapter=c,this.renderer.afterLoad(this.renderer.render.docEl),this.renderer.beforeDisplay(function(){this.renderer.afterDisplay()}.bind(this))):this._rendering||this.renderer.reformat()},EPUBJS.Book.prototype.unlistenToRenderer=function(a){a.Events.forEach(function(b){a.off(b)})},EPUBJS.Book.prototype.coverUrl=function(){var a=this.ready.cover.promise.then(function(a){return this.settings.fromStorage?this.store.getUrl(this.contents.cover):this.settings.contained?this.zip.getUrl(this.contents.cover):this.contents.cover}.bind(this));return a.then(function(a){this.cover=a}.bind(this)),a},EPUBJS.Book.prototype.loadXml=function(a){return this.settings.fromStorage?this.store.getXml(a,this.settings.encoding):this.settings.contained?this.zip.getXml(a,this.settings.encoding):EPUBJS.core.request(a,&quot;xml&quot;,this.settings.withCredentials)},EPUBJS.Book.prototype.urlFrom=function(a){var b,c=EPUBJS.core.uri(a),d=c.protocol,e=&quot;/&quot;==c.path[0],f=window.location,g=f.origin||f.protocol+&quot;//&quot;+f.host,h=document.getElementsByTagName(&quot;base&quot;);return h.length&amp;&amp;(b=h[0].href),c.protocol?c.origin+c.path:!d&amp;&amp;e?(b||g)+c.path:d||e?void 0:EPUBJS.core.resolveUrl(b||f.pathname,c.path)},EPUBJS.Book.prototype.unarchive=function(a){return this.zip=new EPUBJS.Unarchiver,this.store=this.zip,this.zip.open(a)},EPUBJS.Book.prototype.isContained=function(a){if(a instanceof ArrayBuffer)return!0;var b=EPUBJS.core.uri(a);return!(!b.extension||&quot;epub&quot;!=b.extension&amp;&amp;&quot;zip&quot;!=b.extension)},EPUBJS.Book.prototype.isSaved=function(a){var b;return!!localStorage&amp;&amp;(b=localStorage.getItem(a),!(!localStorage||null===b))},EPUBJS.Book.prototype.generateBookKey=function(a){return&quot;epubjs:&quot;+EPUBJS.VERSION+&quot;:&quot;+window.location.host+&quot;:&quot;+a},EPUBJS.Book.prototype.saveContents=function(){if(!localStorage)return!1;localStorage.setItem(this.settings.bookKey,JSON.stringify(this.contents))},EPUBJS.Book.prototype.removeSavedContents=function(){if(!localStorage)return!1;localStorage.removeItem(this.settings.bookKey)},EPUBJS.Book.prototype.renderTo=function(a){var b=this;if(EPUBJS.core.isElement(a))this.element=a;else{if(&quot;string&quot;!=typeof a)return void console.error(&quot;Not an Element&quot;);this.element=EPUBJS.core.getEl(a)}return this.opened.then(function(){return b.renderer.initialize(b.element,b.settings.width,b.settings.height),b.metadata.direction&amp;&amp;b.renderer.setDirection(b.metadata.direction),b._rendered(),b.startDisplay()})},EPUBJS.Book.prototype.startDisplay=function(){return this.settings.goto?this.goto(this.settings.goto):this.settings.previousLocationCfi?this.gotoCfi(this.settings.previousLocationCfi):this.displayChapter(this.spinePos,this.settings.displayLastPage)},EPUBJS.Book.prototype.restore=function(a){var b,c=this,d=[&quot;manifest&quot;,&quot;spine&quot;,&quot;metadata&quot;,&quot;cover&quot;,&quot;toc&quot;,&quot;spineNodeIndex&quot;,&quot;spineIndexByURL&quot;,&quot;globalLayoutProperties&quot;],e=!1,f=this.generateBookKey(a),g=localStorage.getItem(f),h=d.length;if(this.settings.clearSaved&amp;&amp;(e=!0),!e&amp;&amp;&quot;undefined&quot;!=g&amp;&amp;null!==g)for(c.contents=JSON.parse(g),b=0;b&lt;h;b++){var i=d[b];if(!c.contents[i]){e=!0;break}c[i]=c.contents[i]}return!(e||!g||!this.contents||!this.settings.contentsPath)&amp;&amp;(this.settings.bookKey=f,this.ready.manifest.resolve(this.manifest),this.ready.spine.resolve(this.spine),this.ready.metadata.resolve(this.metadata),this.ready.cover.resolve(this.cover),this.ready.toc.resolve(this.toc),!0)},EPUBJS.Book.prototype.displayChapter=function(a,b,c){var d,e,f,g,h=this,i=c||new RSVP.defer;return this.isRendered?this._rendering||this.renderer._moving?(this._displayQ.enqueue(&quot;displayChapter&quot;,[a,b,i]),i.promise):(EPUBJS.core.isNumber(a)?f=a:(e=new EPUBJS.EpubCFI(a),f=e.spinePos),(f&lt;0||f&gt;=this.spine.length)&amp;&amp;(console.warn(&quot;Not A Valid Location&quot;),f=0,b=!1,e=!1),g=new EPUBJS.Chapter(this.spine[f],this.store),this._rendering=!0,this._needsAssetReplacement()&amp;&amp;g.registerHook(&quot;beforeChapterRender&quot;,[EPUBJS.replace.head,EPUBJS.replace.resources,EPUBJS.replace.svg],!0),h.currentChapter=g,d=h.renderer.displayChapter(g,this.globalLayoutProperties),e?h.renderer.gotoCfi(e):b&amp;&amp;h.renderer.lastPage(),d.then(function(a){h.spinePos=f,i.resolve(h.renderer),h.settings.fromStorage===!1&amp;&amp;h.settings.contained===!1&amp;&amp;h.preloadNextChapter(),h._rendering=!1,h._displayQ.dequeue(),0===h._displayQ.length()&amp;&amp;h._gotoQ.dequeue()},function(a){console.error(&quot;Could not load Chapter: &quot;+g.absolute,a),h.trigger(&quot;book:chapterLoadFailed&quot;,g.absolute),h._rendering=!1,i.reject(a)}),i.promise):(this._q.enqueue(&quot;displayChapter&quot;,arguments),i.reject({message:&quot;Rendering&quot;,stack:(new Error).stack}),i.promise)},EPUBJS.Book.prototype.nextPage=function(a){var a=a||new RSVP.defer;return this.isRendered?this.renderer.nextPage()?(a.resolve(!0),a.promise):this.nextChapter(a):(this._q.enqueue(&quot;nextPage&quot;,[a]),a.promise)},EPUBJS.Book.prototype.prevPage=function(a){var a=a||new RSVP.defer;return this.isRendered?this.renderer.prevPage()?(a.resolve(!0),a.promise):this.prevChapter(a):(this._q.enqueue(&quot;prevPage&quot;,[a]),a.promise)},EPUBJS.Book.prototype.nextChapter=function(a){var a=a||new RSVP.defer;if(this.spinePos&lt;this.spine.length-1){for(var b=this.spinePos+1;this.spine[b]&amp;&amp;this.spine[b].linear&amp;&amp;&quot;no&quot;==this.spine[b].linear;)b++;if(b&lt;this.spine.length)return this.displayChapter(b,!1,a)}return this.trigger(&quot;book:atEnd&quot;),a.resolve(!0),a.promise},EPUBJS.Book.prototype.prevChapter=function(a){var a=a||new RSVP.defer;if(this.spinePos&gt;0){for(var b=this.spinePos-1;this.spine[b]&amp;&amp;this.spine[b].linear&amp;&amp;&quot;no&quot;==this.spine[b].linear;)b--;if(b&gt;=0)return this.displayChapter(b,!0,a)}return this.trigger(&quot;book:atStart&quot;),a.resolve(!0),a.promise},EPUBJS.Book.prototype.getCurrentLocationCfi=function(){return!!this.isRendered&amp;&amp;this.renderer.currentLocationCfi},EPUBJS.Book.prototype.goto=function(a){return 0===a.indexOf(&quot;epubcfi(&quot;)?this.gotoCfi(a):a.indexOf(&quot;%&quot;)===a.length-1?this.gotoPercentage(parseInt(a.substring(0,a.length-1))/100):&quot;number&quot;==typeof a||isNaN(a)===!1?this.gotoPage(a):this.gotoHref(a)},EPUBJS.Book.prototype.gotoCfi=function(a,b){var c,d,e,f,g,h=b||new RSVP.defer;return this.isRendered?this._moving||this._rendering?(console.warn(&quot;Renderer is moving&quot;),this._gotoQ.enqueue(&quot;gotoCfi&quot;,[a,h]),!1):(c=new EPUBJS.EpubCFI(a),(d=c.spinePos)!=-1&amp;&amp;(e=this.spine[d],f=h.promise,this._moving=!0,this.currentChapter&amp;&amp;this.spinePos===d?(this.renderer.gotoCfi(c),this._moving=!1,h.resolve(this.renderer.currentLocationCfi)):(e&amp;&amp;d!=-1||(d=0,e=this.spine[d]),g=this.displayChapter(a),g.then(function(a){this._moving=!1,h.resolve(a.currentLocationCfi)}.bind(this),function(){this._moving=!1}.bind(this))),f.then(function(){this._gotoQ.dequeue()}.bind(this)),f)):(console.warn(&quot;Not yet Rendered&quot;),this.settings.previousLocationCfi=a,!1)},EPUBJS.Book.prototype.gotoHref=function(a,b){var c,d,e,f,g,h=b||new RSVP.defer;return this.isRendered?this._moving||this._rendering?(this._gotoQ.enqueue(&quot;gotoHref&quot;,[a,h]),!1):(c=a.split(&quot;#&quot;),d=c[0],e=c[1]||!1,f=d.search(&quot;://&quot;)==-1?d.replace(EPUBJS.core.uri(this.settings.contentsPath).path,&quot;&quot;):d.replace(this.settings.contentsPath,&quot;&quot;),g=this.spineIndexByURL[f],d||(g=this.currentChapter?this.currentChapter.spinePos:0),&quot;number&quot;==typeof g&amp;&amp;(this.currentChapter&amp;&amp;g==this.currentChapter.spinePos?(e?this.renderer.section(e):this.renderer.firstPage(),h.resolve(this.renderer.currentLocationCfi),h.promise.then(function(){this._gotoQ.dequeue()}.bind(this)),h.promise):this.displayChapter(g).then(function(){e&amp;&amp;this.renderer.section(e),h.resolve(this.renderer.currentLocationCfi)}.bind(this)))):(this.settings.goto=a,!1)},EPUBJS.Book.prototype.gotoPage=function(a){var b=this.pagination.cfiFromPage(a);return this.gotoCfi(b)},EPUBJS.Book.prototype.gotoPercentage=function(a){var b=this.pagination.pageFromPercentage(a);return this.gotoPage(b)},EPUBJS.Book.prototype.preloadNextChapter=function(){var a,b=this.spinePos+1;if(b&gt;=this.spine.length)return!1;(a=new EPUBJS.Chapter(this.spine[b]))&amp;&amp;EPUBJS.core.request(a.absolute)},EPUBJS.Book.prototype.storeOffline=function(){var a=this,b=EPUBJS.core.values(this.manifest);return this.store.put(b).then(function(){a.settings.stored=!0,a.trigger(&quot;book:stored&quot;)})},EPUBJS.Book.prototype.availableOffline=function(){return this.settings.stored&gt;0},EPUBJS.Book.prototype.toStorage=function(){var a=this.settings.bookKey;this.store.isStored(a).then(function(b){return b===!0?(this.settings.stored=!0,!0):this.storeOffline().then(function(){this.store.token(a,!0)}.bind(this))}.bind(this))},EPUBJS.Book.prototype.fromStorage=function(a){EPUBJS.replace.head,EPUBJS.replace.resources,EPUBJS.replace.svg;this.contained||this.settings.contained||(this.online&amp;&amp;this.opened.then(this.toStorage.bind(this)),this.store&amp;&amp;this.settings.fromStorage&amp;&amp;a===!1?(this.settings.fromStorage=!1,this.store.off(&quot;offline&quot;),this.store=!1):this.settings.fromStorage||(this.store=new EPUBJS.Storage(this.settings.credentials),this.store.on(&quot;offline&quot;,function(a){a?(this.offline=!0,this.settings.fromStorage=!0,this.trigger(&quot;book:offline&quot;)):(this.offline=!1,this.settings.fromStorage=!1,this.trigger(&quot;book:online&quot;))}.bind(this))))},EPUBJS.Book.prototype.setStyle=function(a,b,c){var d=[&quot;color&quot;,&quot;background&quot;,&quot;background-color&quot;];if(!this.isRendered)return this._q.enqueue(&quot;setStyle&quot;,arguments);this.settings.styles[a]=b,this.renderer.setStyle(a,b,c),d.indexOf(a)===-1&amp;&amp;this.renderer.reformat()},EPUBJS.Book.prototype.removeStyle=function(a){if(!this.isRendered)return this._q.enqueue(&quot;removeStyle&quot;,arguments);this.renderer.removeStyle(a),this.renderer.reformat(),delete this.settings.styles[a]},EPUBJS.Book.prototype.resetClasses=function(a){if(!this.isRendered)return this._q.enqueue(&quot;setClasses&quot;,arguments);a.constructor===String&amp;&amp;(a=[a]),this.settings.classes=a,this.renderer.setClasses(this.settings.classes),this.renderer.reformat()},EPUBJS.Book.prototype.addClass=function(a){if(!this.isRendered)return this._q.enqueue(&quot;addClass&quot;,arguments);this.settings.classes.indexOf(a)==-1&amp;&amp;this.settings.classes.push(a),this.renderer.setClasses(this.settings.classes),this.renderer.reformat()},EPUBJS.Book.prototype.removeClass=function(a){if(!this.isRendered)return this._q.enqueue(&quot;removeClass&quot;,arguments);var b=this.settings.classes.indexOf(a);b!=-1&amp;&amp;(delete this.settings.classes[b],this.renderer.setClasses(this.settings.classes),this.renderer.reformat())},EPUBJS.Book.prototype.addHeadTag=function(a,b){if(!this.isRendered)return this._q.enqueue(&quot;addHeadTag&quot;,arguments);this.settings.headTags[a]=b},EPUBJS.Book.prototype.useSpreads=function(a){console.warn(&quot;useSpreads is deprecated, use forceSingle or set a layoutOveride instead&quot;),a===!1?this.forceSingle(!0):this.forceSingle(!1)},EPUBJS.Book.prototype.forceSingle=function(a){var b=void 0===a||a;this.renderer.forceSingle(b),this.settings.forceSingle=b,this.isRendered&amp;&amp;this.renderer.reformat()},EPUBJS.Book.prototype.setMinSpreadWidth=function(a){this.settings.minSpreadWidth=a,this.isRendered&amp;&amp;(this.renderer.setMinSpreadWidth(this.settings.minSpreadWidth),this.renderer.reformat())},EPUBJS.Book.prototype.setGap=function(a){this.settings.gap=a,this.isRendered&amp;&amp;(this.renderer.setGap(this.settings.gap),this.renderer.reformat())},EPUBJS.Book.prototype.chapter=function(a){var b,c,d=this.spineIndexByURL[a];return d&amp;&amp;(b=this.spine[d],c=new EPUBJS.Chapter(b,this.store,this.settings.withCredentials),c.load()),c},EPUBJS.Book.prototype.unload=function(){this.settings.restore&amp;&amp;localStorage&amp;&amp;this.saveContents(),this.unlistenToRenderer(this.renderer),this.trigger(&quot;book:unload&quot;)},EPUBJS.Book.prototype.destroy=function(){window.removeEventListener(&quot;beforeunload&quot;,this.unload),this.currentChapter&amp;&amp;this.currentChapter.unload(),this.unload(),this.renderer&amp;&amp;this.renderer.remove()},EPUBJS.Book.prototype._ready=function(){this.trigger(&quot;book:ready&quot;)},EPUBJS.Book.prototype._rendered=function(a){this.isRendered=!0,this.trigger(&quot;book:rendered&quot;),this._q.flush()},EPUBJS.Book.prototype.applyStyles=function(a,b){a.applyStyles(this.settings.styles),b()},EPUBJS.Book.prototype.applyClasses=function(a,b){a.setClasses(this.settings.classes),b()},EPUBJS.Book.prototype.applyHeadTags=function(a,b){a.applyHeadTags(this.settings.headTags),b()},EPUBJS.Book.prototype._registerReplacements=function(a){a.registerHook(&quot;beforeChapterDisplay&quot;,this.applyStyles.bind(this,a),!0),a.registerHook(&quot;beforeChapterDisplay&quot;,this.applyHeadTags.bind(this,a),!0),a.registerHook(&quot;beforeChapterDisplay&quot;,this.applyClasses.bind(this,a),!0),a.registerHook(&quot;beforeChapterDisplay&quot;,EPUBJS.replace.hrefs.bind(this),!0)},EPUBJS.Book.prototype._needsAssetReplacement=function(){return!!this.settings.fromStorage||!!this.settings.contained},EPUBJS.Book.prototype.parseLayoutProperties=function(a){return{layout:this.settings.layoutOveride&amp;&amp;this.settings.layoutOveride.layout||a.layout||&quot;reflowable&quot;,spread:this.settings.layoutOveride&amp;&amp;this.settings.layoutOveride.spread||a.spread||&quot;auto&quot;,orientation:this.settings.layoutOveride&amp;&amp;this.settings.layoutOveride.orientation||a.orientation||&quot;auto&quot;}},RSVP.EventTarget.mixin(EPUBJS.Book.prototype),RSVP.on(&quot;error&quot;,function(a){console.error(a)}),EPUBJS.Chapter=function(a,b,c){this.href=a.href,this.absolute=a.url,this.id=a.id,this.spinePos=a.index,this.cfiBase=a.cfiBase,this.properties=a.properties,this.manifestProperties=a.manifestProperties,this.linear=a.linear,this.pages=1,this.store=b,this.credentials=c,this.epubcfi=new EPUBJS.EpubCFI,this.deferred=new RSVP.defer,this.loaded=this.deferred.promise,EPUBJS.Hooks.mixin(this),this.getHooks(&quot;beforeChapterRender&quot;),this.caches={}},EPUBJS.Chapter.prototype.load=function(a,b){var c,d=a||this.store,e=b||this.credentials;return c=d?d.getXml(this.absolute):EPUBJS.core.request(this.absolute,!1,e),c.then(function(a){try{this.setDocument(a),this.deferred.resolve(this)}catch(a){this.deferred.reject({message:this.absolute+&quot; -&gt; &quot;+a.message,stack:(new Error).stack})}}.bind(this)),c},EPUBJS.Chapter.prototype.render=function(a){return this.load().then(function(a){var b=a.querySelector(&quot;head&quot;),c=a.createElement(&quot;base&quot;);return c.setAttribute(&quot;href&quot;,this.absolute),b.insertBefore(c,b.firstChild),this.contents=a,new RSVP.Promise(function(b,c){this.triggerHooks(&quot;beforeChapterRender&quot;,function(){b(a)}.bind(this),this)}.bind(this))}.bind(this)).then(function(a){return(new XMLSerializer).serializeToString(a)}.bind(this))},EPUBJS.Chapter.prototype.url=function(a){var b,c=new RSVP.defer,d=a||this.store,e=this;return d?this.tempUrl?(b=this.tempUrl,c.resolve(b)):d.getUrl(this.absolute).then(function(a){e.tempUrl=a,c.resolve(a)}):(b=this.absolute,c.resolve(b)),c.promise},EPUBJS.Chapter.prototype.setPages=function(a){this.pages=a},EPUBJS.Chapter.prototype.getPages=function(a){return this.pages},EPUBJS.Chapter.prototype.getID=function(){return this.ID},EPUBJS.Chapter.prototype.unload=function(a){this.document=null,this.tempUrl&amp;&amp;a&amp;&amp;(a.revokeUrl(this.tempUrl),this.tempUrl=!1)},EPUBJS.Chapter.prototype.setDocument=function(a){this.document=a,this.contents=a.documentElement,!this.document.evaluate&amp;&amp;document.evaluate&amp;&amp;(this.document.evaluate=document.evaluate)},EPUBJS.Chapter.prototype.cfiFromRange=function(a){var b,c,d,e,f,g,h;if(this.document){if(void 0!==document.evaluate){if(c=EPUBJS.core.getElementXPath(a.startContainer),d=EPUBJS.core.getElementXPath(a.endContainer),e=this.document.evaluate(c,this.document,EPUBJS.core.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,a.collapsed||(f=this.document.evaluate(d,this.document,EPUBJS.core.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),b=this.document.createRange(),e)try{b.setStart(e,a.startOffset),!a.collapsed&amp;&amp;f&amp;&amp;b.setEnd(f,a.endOffset)}catch(a){console.log(&quot;missed&quot;),e=!1}e||(console.log(&quot;not found, try fuzzy match&quot;),g=EPUBJS.core.cleanStringForXpath(a.startContainer.textContent),c=&quot;//text()[contains(.,&quot;+g+&quot;)]&quot;,(e=this.document.evaluate(c,this.document,EPUBJS.core.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)&amp;&amp;(b.setStart(e,a.startOffset),a.collapsed||(h=EPUBJS.core.cleanStringForXpath(a.endContainer.textContent),d=&quot;//text()[contains(.,&quot;+h+&quot;)]&quot;,(f=this.document.evaluate(d,this.document,EPUBJS.core.nsResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)&amp;&amp;b.setEnd(f,a.endOffset))))}else b=a;return this.epubcfi.generateCfiFromRange(b,this.cfiBase)}},EPUBJS.Chapter.prototype.find=function(a){var b=this,c=[],d=a.toLowerCase(),e=function(a){for(var e,f,g,h=a.textContent.toLowerCase(),i=b.document.createRange(),j=-1,k=150;f!=-1;)f=h.indexOf(d,j+1),f!=-1&amp;&amp;(i=b.document.createRange(),i.setStart(a,f),i.setEnd(a,f+d.length),e=b.cfiFromRange(i),a.textContent.length&lt;k?g=a.textContent:(g=a.textContent.substring(f-k/2,f+k/2),g=&quot;...&quot;+g+&quot;...&quot;),c.push({cfi:e,excerpt:g})),j=f};return this.textSprint(this.document,function(a){e(a)}),c},EPUBJS.Chapter.prototype.textSprint=function(a,b){for(var c,d=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,{acceptNode:function(a){return a.data&amp;&amp;!/^\s*$/.test(a.data)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1);c=d.nextNode();)b(c)},EPUBJS.Chapter.prototype.replace=function(a,b,c,d){var e=this.contents.querySelectorAll(a),f=Array.prototype.slice.call(e),g=f.length;if(0===g)return void c(!1);f.forEach(function(a){var e=!1;b(a,function(a,b){e===!1&amp;&amp;(g--,d&amp;&amp;d(a,b,g),g&lt;=0&amp;&amp;c&amp;&amp;c(!0),e=!0)})}.bind(this))},EPUBJS.Chapter.prototype.replaceWithStored=function(a,b,c,d){var e,f={},g=this.store,h=this.caches[a],i=EPUBJS.core.uri(this.absolute),j=i.base,k=b,l=function(a,b,c){f[b]=a},m=function(a){d&amp;&amp;d(),EPUBJS.core.values(e).forEach(function(a){g.revokeUrl(a)}),h=f};g&amp;&amp;(h||(h={}),e=EPUBJS.core.clone(h),this.replace(a,function(b,d){var h=b.getAttribute(k),i=EPUBJS.core.resolveUrl(j,h),l=function(c){var e;b.onload=function(){clearTimeout(e),d(c,i)},&quot;svg image&quot;==a&amp;&amp;b.setAttribute(&quot;externalResourcesRequired&quot;,&quot;true&quot;),&quot;link[href]&quot;==a&amp;&amp;&quot;stylesheet&quot;!==b.getAttribute(&quot;rel&quot;)?d(c,i):e=setTimeout(function(){d(c,i)},5),c&amp;&amp;b.setAttribute(k,c)};i in e?(l(e[i]),f[i]=e[i],delete e[i]):c(g,i,l,b)},m,l))};var EPUBJS=EPUBJS||{};EPUBJS.core={};var ELEMENT_NODE=1,TEXT_NODE=3,COMMENT_NODE=8,DOCUMENT_NODE=9;EPUBJS.core.getEl=function(a){return document.getElementById(a)},EPUBJS.core.getEls=function(a){return document.getElementsByClassName(a)},EPUBJS.core.request=function(a,b,c){var d,e=window.URL,f=e?&quot;blob&quot;:&quot;arraybuffer&quot;,g=new RSVP.defer,h=new XMLHttpRequest,i=XMLHttpRequest.prototype,j=function(){var a;this.readyState==this.DONE&amp;&amp;(200!==this.status&amp;&amp;0!==this.status||!this.response?g.reject({message:this.response,stack:(new Error).stack}):(a=&quot;xml&quot;==b?this.responseXML?this.responseXML:(new DOMParser).parseFromString(this.response,&quot;application/xml&quot;):&quot;xhtml&quot;==b?this.responseXML?this.responseXML:(new DOMParser).parseFromString(this.response,&quot;application/xhtml+xml&quot;):&quot;html&quot;==b?this.responseXML?this.responseXML:(new DOMParser).parseFromString(this.response,&quot;text/html&quot;):&quot;json&quot;==b?JSON.parse(this.response):&quot;blob&quot;==b?e?this.response:new Blob([this.response]):this.response,g.resolve(a)))};return&quot;overrideMimeType&quot;in i||Object.defineProperty(i,&quot;overrideMimeType&quot;,{value:function(a){}}),h.onreadystatechange=j,h.open(&quot;GET&quot;,a,!0),c&amp;&amp;(h.withCredentials=!0),b||(d=EPUBJS.core.uri(a),b=d.extension,b={htm:&quot;html&quot;}[b]||b),&quot;blob&quot;==b&amp;&amp;(h.responseType=f),&quot;json&quot;==b&amp;&amp;h.setRequestHeader(&quot;Accept&quot;,&quot;application/json&quot;),&quot;xml&quot;==b&amp;&amp;(h.responseType=&quot;document&quot;,h.overrideMimeType(&quot;text/xml&quot;)),&quot;xhtml&quot;==b&amp;&amp;(h.responseType=&quot;document&quot;),&quot;html&quot;==b&amp;&amp;(h.responseType=&quot;document&quot;),&quot;binary&quot;==b&amp;&amp;(h.responseType=&quot;arraybuffer&quot;),h.send(),g.promise},EPUBJS.core.toArray=function(a){var b=[];for(var c in a){var d;a.hasOwnProperty(c)&amp;&amp;(d=a[c],d.ident=c,b.push(d))}return b},EPUBJS.core.uri=function(a){var b,c,d,e={protocol:&quot;&quot;,host:&quot;&quot;,path:&quot;&quot;,origin:&quot;&quot;,directory:&quot;&quot;,base:&quot;&quot;,filename:&quot;&quot;,extension:&quot;&quot;,fragment:&quot;&quot;,href:a},f=a.indexOf(&quot;blob:&quot;),g=a.indexOf(&quot;://&quot;),h=a.indexOf(&quot;?&quot;),i=a.indexOf(&quot;#&quot;);return 0===f?(e.protocol=&quot;blob&quot;,e.base=a.indexOf(0,i),e):(i!=-1&amp;&amp;(e.fragment=a.slice(i+1),a=a.slice(0,i)),h!=-1&amp;&amp;(e.search=a.slice(h+1),a=a.slice(0,h),href=e.href),g!=-1?(e.protocol=a.slice(0,g),b=a.slice(g+3),d=b.indexOf(&quot;/&quot;),d===-1?(e.host=e.path,e.path=&quot;&quot;):(e.host=b.slice(0,d),e.path=b.slice(d)),e.origin=e.protocol+&quot;://&quot;+e.host,e.directory=EPUBJS.core.folder(e.path),e.base=e.origin+e.directory):(e.path=a,e.directory=EPUBJS.core.folder(a),e.base=e.directory),e.filename=a.replace(e.base,&quot;&quot;),c=e.filename.lastIndexOf(&quot;.&quot;),c!=-1&amp;&amp;(e.extension=e.filename.slice(c+1)),e)},EPUBJS.core.folder=function(a){var b=a.lastIndexOf(&quot;/&quot;);if(b==-1);return a.slice(0,b+1)},EPUBJS.core.dataURLToBlob=function(a){var b,c,d,e,f,g=&quot;;base64,&quot;;if(a.indexOf(g)==-1)return b=a.split(&quot;,&quot;),c=b[0].split(&quot;:&quot;)[1],d=b[1],new Blob([d],{type:c});b=a.split(g),c=b[0].split(&quot;:&quot;)[1],d=window.atob(b[1]),e=d.length,f=new Uint8Array(e);for(var h=0;h&lt;e;++h)f[h]=d.charCodeAt(h);return new Blob([f],{type:c})},EPUBJS.core.addScript=function(a,b,c){var d,e;e=!1,d=document.createElement(&quot;script&quot;),d.type=&quot;text/javascript&quot;,d.async=!1,d.src=a,d.onload=d.onreadystatechange=function(){e||this.readyState&amp;&amp;&quot;complete&quot;!=this.readyState||(e=!0,b&amp;&amp;b())},c=c||document.body,c.appendChild(d)},EPUBJS.core.addScripts=function(a,b,c){var d=a.length,e=0,f=function(){e++,d==e?b&amp;&amp;b():EPUBJS.core.addScript(a[e],f,c)};EPUBJS.core.addScript(a[e],f,c)},EPUBJS.core.addCss=function(a,b,c){var d,e;e=!1,d=document.createElement(&quot;link&quot;),d.type=&quot;text/css&quot;,d.rel=&quot;stylesheet&quot;,d.href=a,d.onload=d.onreadystatechange=function(){e||this.readyState&amp;&amp;&quot;complete&quot;!=this.readyState||(e=!0,b&amp;&amp;b())},c=c||document.body,c.appendChild(d)},EPUBJS.core.prefixed=function(a){var b=[&quot;Webkit&quot;,&quot;Moz&quot;,&quot;O&quot;,&quot;ms&quot;],c=a[0].toUpperCase()+a.slice(1),d=b.length;if(void 0!==document.documentElement.style[a])return a;for(var e=0;e&lt;d;e++)if(void 0!==document.documentElement.style[b[e]+c])return b[e]+c;return a},EPUBJS.core.resolveUrl=function(a,b){var c,d,e=[],f=EPUBJS.core.uri(b),g=a.split(&quot;/&quot;);return f.host?b:(g.pop(),d=b.split(&quot;/&quot;),d.forEach(function(a){&quot;..&quot;===a?g.pop():e.push(a)}),c=g.concat(e),c.join(&quot;/&quot;))},EPUBJS.core.uuid=function(){var a=(new Date).getTime();return&quot;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&quot;.replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),(&quot;x&quot;==b?c:7&amp;c|8).toString(16)})},EPUBJS.core.insert=function(a,b,c){var d=EPUBJS.core.locationOf(a,b,c);return b.splice(d,0,a),d},EPUBJS.core.locationOf=function(a,b,c,d,e){var f,g=d||0,h=e||b.length,i=parseInt(g+(h-g)/2);return c||(c=function(a,b){return a&gt;b?1:a&lt;b?-1:(a=b)?0:void 0}),h-g&lt;=0?i:(f=c(b[i],a),h-g==1?f&gt;0?i:i+1:0===f?i:f===-1?EPUBJS.core.locationOf(a,b,c,i,h):EPUBJS.core.locationOf(a,b,c,g,i))},EPUBJS.core.indexOfSorted=function(a,b,c,d,e){var f,g=d||0,h=e||b.length,i=parseInt(g+(h-g)/2);return c||(c=function(a,b){return a&gt;b?1:a&lt;b?-1:(a=b)?0:void 0}),h-g&lt;=0?-1:(f=c(b[i],a),h-g==1?0===f?i:-1:0===f?i:f===-1?EPUBJS.core.indexOfSorted(a,b,c,i,h):EPUBJS.core.indexOfSorted(a,b,c,g,i))},EPUBJS.core.queue=function(a){var b=[],c=a,d=function(a,c,d){return b.push({funcName:a,args:c,context:d}),b},e=function(){var a;b.length&amp;&amp;(a=b.shift(),c[a.funcName].apply(a.context||c,a.args))};return{enqueue:d,dequeue:e,flush:function(){for(;b.length;)e()},clear:function(){b=[]},length:function(){return b.length}}},EPUBJS.core.getElementXPath=function(a){return a&amp;&amp;a.id?&#39;//*[@id=&quot;&#39;+a.id+&#39;&quot;]&#39;:EPUBJS.core.getElementTreeXPath(a)},EPUBJS.core.getElementTreeXPath=function(a){var b,c,d,e,f=[],g=&quot;http://www.w3.org/1999/xhtml&quot;===a.ownerDocument.documentElement.getAttribute(&quot;xmlns&quot;);for(a.nodeType===Node.TEXT_NODE&amp;&amp;(b=EPUBJS.core.indexOfTextNode(a)+1,f.push(&quot;text()[&quot;+b+&quot;]&quot;),a=a.parentNode);a&amp;&amp;1==a.nodeType;a=a.parentNode){b=0;for(var h=a.previousSibling;h;h=h.previousSibling)h.nodeType!=Node.DOCUMENT_TYPE_NODE&amp;&amp;h.nodeName==a.nodeName&amp;&amp;++b;c=a.nodeName.toLowerCase(),d=g?&quot;xhtml:&quot;+c:c,e=b?&quot;[&quot;+(b+1)+&quot;]&quot;:&quot;&quot;,f.splice(0,0,d+e)}return f.length?&quot;./&quot;+f.join(&quot;/&quot;):null},EPUBJS.core.nsResolver=function(a){return{xhtml:&quot;http://www.w3.org/1999/xhtml&quot;,epub:&quot;http://www.idpf.org/2007/ops&quot;}[a]||null},EPUBJS.core.cleanStringForXpath=function(a){var b=a.match(/[^&#39;&quot;]+|[&#39;&quot;]/g);return b=b.map(function(a){return&quot;&#39;&quot;===a?&#39;&quot;\&#39;&quot;&#39;:&#39;&quot;&#39;===a?&quot;&#39;\&quot;&#39;&quot;:&quot;&#39;&quot;+a+&quot;&#39;&quot;}),&quot;concat(&#39;&#39;,&quot;+b.join(&quot;,&quot;)+&quot;)&quot;},EPUBJS.core.indexOfTextNode=function(a){for(var b,c=a.parentNode,d=c.childNodes,e=-1,f=0;f&lt;d.length&amp;&amp;(b=d[f],b.nodeType===Node.TEXT_NODE&amp;&amp;e++,b!=a);f++);return e},EPUBJS.core.defaults=function(a){for(var b=1,c=arguments.length;b&lt;c;b++){var d=arguments[b];for(var e in d)void 0===a[e]&amp;&amp;(a[e]=d[e])}return a},EPUBJS.core.extend=function(a){return[].slice.call(arguments,1).forEach(function(b){b&amp;&amp;Object.getOwnPropertyNames(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))})}),a},EPUBJS.core.clone=function(a){return EPUBJS.core.isArray(a)?a.slice():EPUBJS.core.extend({},a)},EPUBJS.core.isElement=function(a){return!(!a||1!=a.nodeType)},EPUBJS.core.isNumber=function(a){return!isNaN(parseFloat(a))&amp;&amp;isFinite(a)},EPUBJS.core.isString=function(a){return&quot;string&quot;==typeof a||a instanceof String},EPUBJS.core.isArray=Array.isArray||function(a){return&quot;[object Array]&quot;===Object.prototype.toString.call(a)},EPUBJS.core.values=function(a){var b,c,d,e=-1;if(!a)return[];for(b=Object.keys(a),c=b.length,d=Array(c);++e&lt;c;)d[e]=a[b[e]];return d},EPUBJS.core.indexOfNode=function(a,b){for(var c,d=a.parentNode,e=d.childNodes,f=-1,g=0;g&lt;e.length&amp;&amp;(c=e[g],c.nodeType===b&amp;&amp;f++,c!=a);g++);return f},EPUBJS.core.indexOfTextNode=function(a){return EPUBJS.core.indexOfNode(a,TEXT_NODE)},EPUBJS.core.indexOfElementNode=function(a){return EPUBJS.core.indexOfNode(a,ELEMENT_NODE)},EPUBJS.EpubCFI=function(a){if(a)return this.parse(a)},EPUBJS.EpubCFI.prototype.generateChapterComponent=function(a,b,c){var d=parseInt(b),e=2*(a+1),f=&quot;/&quot;+e+&quot;/&quot;;return f+=2*(d+1),c&amp;&amp;(f+=&quot;[&quot;+c+&quot;]&quot;),f},EPUBJS.EpubCFI.prototype.generatePathComponent=function(a){return a.map(function(a){return 2*(a.index+1)+(a.id?&quot;[&quot;+a.id+&quot;]&quot;:&quot;&quot;)}).join(&quot;/&quot;)},EPUBJS.EpubCFI.prototype.generateCfiFromElement=function(a,b){var c=this.pathTo(a),d=this.generatePathComponent(c);return d.length?&quot;epubcfi(&quot;+b+&quot;!/&quot;+d+&quot;/1:0)&quot;:&quot;epubcfi(&quot;+b+&quot;!/4/)&quot;},EPUBJS.EpubCFI.prototype.pathTo=function(a){for(var b,c=[];a&amp;&amp;null!==a.parentNode&amp;&amp;9!=a.parentNode.nodeType;)b=a.parentNode.children,c.unshift({id:a.id,tagName:a.tagName,index:b?Array.prototype.indexOf.call(b,a):0}),a=a.parentNode;return c},EPUBJS.EpubCFI.prototype.getChapterComponent=function(a){return a.split(&quot;!&quot;)[0]},EPUBJS.EpubCFI.prototype.getPathComponent=function(a){var b=a.split(&quot;!&quot;);return(b[1]?b[1].split(&quot;:&quot;):&quot;&quot;)[0]},EPUBJS.EpubCFI.prototype.getCharecterOffsetComponent=EPUBJS.EpubCFI.prototype.getCharacterOffsetComponent=function(a){return a.split(&quot;:&quot;)[1]||&quot;&quot;},EPUBJS.EpubCFI.prototype.parse=function(a){var b,c,d,e,f,g,h,i,j,k={},l=function(a){var b,c,d,e;return b=&quot;element&quot;,c=parseInt(a)/2-1,d=a.match(/\[(.*)\]/),d&amp;&amp;d[1]&amp;&amp;(e=d[1]),{type:b,index:c,id:e||!1}};return&quot;string&quot;!=typeof a?{spinePos:-1}:(k.str=a,0===a.indexOf(&quot;epubcfi(&quot;)&amp;&amp;&quot;)&quot;===a[a.length-1]&amp;&amp;(a=a.slice(8,a.length-1)),c=this.getChapterComponent(a),d=this.getPathComponent(a)||&quot;&quot;,e=this.getCharacterOffsetComponent(a),c&amp;&amp;(b=c.split(&quot;/&quot;)[2]||&quot;&quot;)?(k.spinePos=parseInt(b)/2-1||0,g=b.match(/\[(.*)\]/),k.spineId=!!g&amp;&amp;g[1],d.indexOf(&quot;,&quot;)!=-1&amp;&amp;console.warn(&quot;CFI Ranges are not supported&quot;),h=d.split(&quot;/&quot;),i=h.pop(),k.steps=[],h.forEach(function(a){var b;a&amp;&amp;(b=l(a),k.steps.push(b))}),j=parseInt(i),isNaN(j)||(j%2==0?k.steps.push(l(i)):k.steps.push({type:&quot;text&quot;,index:(j-1)/2})),f=e.match(/\[(.*)\]/),f&amp;&amp;f[1]?(k.characterOffset=parseInt(e.split(&quot;[&quot;)[0]),k.textLocationAssertion=f[1]):k.characterOffset=parseInt(e),k):{spinePos:-1})},EPUBJS.EpubCFI.prototype.addMarker=function(a,b,c){var d,e,f,g,h=b||document,i=c||this.createMarker(h);return&quot;string&quot;==typeof a&amp;&amp;(a=this.parse(a)),e=a.steps[a.steps.length-1],a.spinePos!==-1&amp;&amp;(!!(d=this.findParent(a,h))&amp;&amp;(e&amp;&amp;&quot;text&quot;===e.type?(f=d.childNodes[e.index],a.characterOffset?(g=f.splitText(a.characterOffset),i.classList.add(&quot;EPUBJS-CFI-SPLIT&quot;),d.insertBefore(i,g)):d.insertBefore(i,f)):d.insertBefore(i,d.firstChild),i))},EPUBJS.EpubCFI.prototype.createMarker=function(a){var b=a||document,c=b.createElement(&quot;span&quot;);return c.id=&quot;EPUBJS-CFI-MARKER:&quot;+EPUBJS.core.uuid(),c.classList.add(&quot;EPUBJS-CFI-MARKER&quot;),c},EPUBJS.EpubCFI.prototype.removeMarker=function(a,b){b||document;a.classList.contains(&quot;EPUBJS-CFI-SPLIT&quot;)?(nextSib=a.nextSibling,prevSib=a.previousSibling,nextSib&amp;&amp;prevSib&amp;&amp;3===nextSib.nodeType&amp;&amp;3===prevSib.nodeType&amp;&amp;(prevSib.textContent+=nextSib.textContent,a.parentNode.removeChild(nextSib)),a.parentNode.removeChild(a)):a.classList.contains(&quot;EPUBJS-CFI-MARKER&quot;)&amp;&amp;a.parentNode.removeChild(a)},EPUBJS.EpubCFI.prototype.findParent=function(a,b){var c,d,e,f=b||document,g=f.getElementsByTagName(&quot;html&quot;)[0],h=Array.prototype.slice.call(g.children);if(&quot;string&quot;==typeof a&amp;&amp;(a=this.parse(a)),d=a.steps.slice(0),!d.length)return f.getElementsByTagName(&quot;body&quot;)[0];for(;d&amp;&amp;d.length&gt;0;){if(c=d.shift(),&quot;text&quot;===c.type?(e=g.childNodes[c.index],g=e.parentNode||g):g=c.id?f.getElementById(c.id):h[c.index],!g||void 0===g)return console.error(&quot;No Element For&quot;,c,a.str),!1;h=Array.prototype.slice.call(g.children)}return g},EPUBJS.EpubCFI.prototype.compare=function(a,b){if(&quot;string&quot;==typeof a&amp;&amp;(a=new EPUBJS.EpubCFI(a)),&quot;string&quot;==typeof b&amp;&amp;(b=new EPUBJS.EpubCFI(b)),a.spinePos&gt;b.spinePos)return 1;if(a.spinePos&lt;b.spinePos)return-1;for(var c=0;c&lt;a.steps.length;c++){if(!b.steps[c])return 1;if(a.steps[c].index&gt;b.steps[c].index)return 1;if(a.steps[c].index&lt;b.steps[c].index)return-1}return a.steps.length&lt;b.steps.length?-1:a.characterOffset&gt;b.characterOffset?1:a.characterOffset&lt;b.characterOffset?-1:0},EPUBJS.EpubCFI.prototype.generateCfiFromHref=function(a,b){var c,d,e=EPUBJS.core.uri(a),f=e.path,g=e.fragment,h=b.spineIndexByURL[f],i=new RSVP.defer,j=new EPUBJS.EpubCFI;return void 0!==h&amp;&amp;(d=b.spine[h],c=b.loadXml(d.url),c.then(function(a){var b,c=a.getElementById(g);b=j.generateCfiFromElement(c,d.cfiBase),i.resolve(b)})),i.promise},EPUBJS.EpubCFI.prototype.generateCfiFromTextNode=function(a,b,c){var d=a.parentNode,e=this.pathTo(d);return&quot;epubcfi(&quot;+c+&quot;!/&quot;+this.generatePathComponent(e)+&quot;/&quot;+(1+2*Array.prototype.indexOf.call(d.childNodes,a))+&quot;:&quot;+(b||0)+&quot;)&quot;},EPUBJS.EpubCFI.prototype.generateCfiFromRangeAnchor=function(a,b){var c=a.anchorNode,d=a.anchorOffset;return this.generateCfiFromTextNode(c,d,b)},EPUBJS.EpubCFI.prototype.generateCfiFromRange=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;if(c=a.startContainer,3===c.nodeType)d=c.parentNode,h=1+2*EPUBJS.core.indexOfTextNode(c),e=this.pathTo(d);else{if(a.collapsed)return this.generateCfiFromElement(c,b);e=this.pathTo(c)}return f=this.generatePathComponent(e),g=a.startOffset,a.collapsed?&quot;epubcfi(&quot;+b+&quot;!/&quot;+f+&quot;/&quot;+h+&quot;:&quot;+g+&quot;)&quot;:(i=a.endContainer,3===i.nodeType?(j=i.parentNode,n=1+2*EPUBJS.core.indexOfTextNode(i),k=this.pathTo(j)):k=this.pathTo(i),l=this.generatePathComponent(k),m=a.endOffset,l=l.replace(f,&quot;&quot;),l.length&amp;&amp;(l+=&quot;/&quot;),&quot;epubcfi(&quot;+b+&quot;!/&quot;+f+&quot;/&quot;+h+&quot;:&quot;+g+&quot;,&quot;+l+n+&quot;:&quot;+m+&quot;)&quot;)},EPUBJS.EpubCFI.prototype.generateXpathFromSteps=function(a){var b=[&quot;.&quot;,&quot;*&quot;];return a.forEach(function(a){var c=a.index+1;a.id?b.push(&quot;*[position()=&quot;+c+&quot; and @id=&#39;&quot;+a.id+&quot;&#39;]&quot;):&quot;text&quot;===a.type?b.push(&quot;text()[&quot;+c+&quot;]&quot;):b.push(&quot;*[&quot;+c+&quot;]&quot;)}),b.join(&quot;/&quot;)},EPUBJS.EpubCFI.prototype.generateQueryFromSteps=function(a){var b=[&quot;html&quot;];return a.forEach(function(a){var c=a.index+1;a.id?b.push(&quot;#&quot;+a.id):&quot;text&quot;===a.type||b.push(&quot;*:nth-child(&quot;+c+&quot;)&quot;)}),b.join(&quot;&gt;&quot;)},EPUBJS.EpubCFI.prototype.generateRangeFromCfi=function(a,b){var c,d,e,f,g,h,i=b||document,j=i.createRange();return&quot;string&quot;==typeof a&amp;&amp;(a=this.parse(a)),a.spinePos!==-1&amp;&amp;(c=a.steps[a.steps.length-1],void 0!==document.evaluate?(d=this.generateXpathFromSteps(a.steps),e=i.evaluate(d,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):(g=this.generateQueryFromSteps(a.steps),(h=i.querySelector(g))&amp;&amp;&quot;text&quot;==c.type&amp;&amp;(e=h.childNodes[c.index])),e?(e&amp;&amp;a.characterOffset&gt;=0?(f=e.length,a.characterOffset&lt;f?(j.setStart(e,a.characterOffset),j.setEnd(e,f)):(console.debug(&quot;offset greater than length:&quot;,a.characterOffset,f),j.setStart(e,f-1),j.setEnd(e,f))):e&amp;&amp;j.selectNode(e),j):null)},EPUBJS.EpubCFI.prototype.isCfiString=function(a){return&quot;string&quot;==typeof a&amp;&amp;0===a.indexOf(&quot;epubcfi(&quot;)},EPUBJS.Events=function(a,b){return this.events={},this.el=b?b:document.createElement(&quot;div&quot;),a.createEvent=this.createEvent,a.tell=this.tell,a.listen=this.listen,a.deafen=this.deafen,a.listenUntil=this.listenUntil,this},EPUBJS.Events.prototype.createEvent=function(a){var b=new CustomEvent(a);return this.events[a]=b,b},EPUBJS.Events.prototype.tell=function(a,b){var c;this.events[a]?c=this.events[a]:(console.warn(&quot;No event:&quot;,a,&quot;defined yet, creating.&quot;),c=this.createEvent(a)),b&amp;&amp;(c.msg=b),this.el.dispatchEvent(c)},EPUBJS.Events.prototype.listen=function(a,b,c){if(!this.events[a])return console.warn(&quot;No event:&quot;,a,&quot;defined yet, creating.&quot;),void this.createEvent(a);c?this.el.addEventListener(a,b.bind(c),!1):this.el.addEventListener(a,b,!1)},EPUBJS.Events.prototype.deafen=function(a,b){this.el.removeEventListener(a,b,!1)},EPUBJS.Events.prototype.listenUntil=function(a,b,c,d){function e(){this.deafen(a,c),this.deafen(b,e)}this.listen(a,c,d),this.listen(b,e,this)},EPUBJS.hooks={},EPUBJS.Hooks=function(){function a(){}return a.prototype.getHooks=function(){var a;this.hooks={},Array.prototype.slice.call(arguments).forEach(function(a){this.hooks[a]=[]},this);for(var b in this.hooks)a=EPUBJS.core.values(EPUBJS.hooks[b]),a.forEach(function(a){this.registerHook(b,a)},this)},a.prototype.registerHook=function(a,b,c){void 0!==this.hooks[a]?&quot;function&quot;==typeof b?c?this.hooks[a].unshift(b):this.hooks[a].push(b):Array.isArray(b)&amp;&amp;b.forEach(function(b){c?this.hooks[a].unshift(b):this.hooks[a].push(b)},this):(this.hooks[a]=[b],&quot;function&quot;==typeof b?this.hooks[a]=[b]:Array.isArray(b)&amp;&amp;(this.hooks[a]=[],b.forEach(function(b){this.hooks[a].push(b)},this)))},a.prototype.removeHook=function(a,b){var c;void 0!==this.hooks[a]&amp;&amp;(&quot;function&quot;==typeof b?(c=this.hooks[a].indexOf(b))&gt;-1&amp;&amp;this.hooks[a].splice(c,1):Array.isArray(b)&amp;&amp;b.forEach(function(b){(c=this.hooks[a].indexOf(b))&gt;-1&amp;&amp;this.hooks[a].splice(c,1)},this))},a.prototype.triggerHooks=function(a,b,c){function d(){--f&lt;=0&amp;&amp;b&amp;&amp;b()}var e,f;if(void 0===this.hooks[a])return!1;e=this.hooks[a],f=e.length,0===f&amp;&amp;b&amp;&amp;b(),e.forEach(function(a){a(d,c)})},{register:function(a){if(void 0===EPUBJS.hooks[a]&amp;&amp;(EPUBJS.hooks[a]={}),&quot;object&quot;!=typeof EPUBJS.hooks[a])throw&quot;Already registered: &quot;+a;return EPUBJS.hooks[a]},mixin:function(b){for(var c in a.prototype)b[c]=a.prototype[c]}}}(),EPUBJS.Layout=EPUBJS.Layout||{},EPUBJS.Layout.isFixedLayout=function(a){var b=a.querySelector(&quot;[name=viewport]&quot;);if(!b||!b.hasAttribute(&quot;content&quot;))return!1;var c=b.getAttribute(&quot;content&quot;);return/width=(\d+)/.test(c)&amp;&amp;/height=(\d+)/.test(c)},EPUBJS.Layout.Reflowable=function(){this.documentElement=null,this.spreadWidth=null},EPUBJS.Layout.Reflowable.prototype.format=function(a,b,c,d){var e=EPUBJS.core.prefixed(&quot;columnAxis&quot;),f=EPUBJS.core.prefixed(&quot;columnGap&quot;),g=EPUBJS.core.prefixed(&quot;columnWidth&quot;),h=EPUBJS.core.prefixed(&quot;columnFill&quot;),i=Math.floor(b),j=Math.floor(i/8),k=d&gt;=0?d:j%2==0?j:j-1;return this.documentElement=a,this.spreadWidth=i+k,a.style.overflow=&quot;hidden&quot;,a.style.width=i+&quot;px&quot;,a.style.height=c+&quot;px&quot;,a.style[e]=&quot;horizontal&quot;,a.style[h]=&quot;auto&quot;,a.style[g]=i+&quot;px&quot;,a.style[f]=k+&quot;px&quot;,this.colWidth=i,this.gap=k,{pageWidth:this.spreadWidth,pageHeight:c}},EPUBJS.Layout.Reflowable.prototype.calculatePages=function(){var a,b;return this.documentElement.style.width=&quot;auto&quot;,a=this.documentElement.scrollWidth,b=Math.ceil(a/this.spreadWidth),{displayedPages:b,pageCount:b}},EPUBJS.Layout.ReflowableSpreads=function(){this.documentElement=null,this.spreadWidth=null},EPUBJS.Layout.ReflowableSpreads.prototype.format=function(a,b,c,d){var e=EPUBJS.core.prefixed(&quot;columnAxis&quot;),f=EPUBJS.core.prefixed(&quot;columnGap&quot;),g=EPUBJS.core.prefixed(&quot;columnWidth&quot;),h=EPUBJS.core.prefixed(&quot;columnFill&quot;),i=2,j=Math.floor(b),k=j%2==0?j:j-1,l=Math.floor(k/8),m=d&gt;=0?d:l%2==0?l:l-1,n=Math.floor((k-m)/i);return this.documentElement=a,this.spreadWidth=(n+m)*i,a.style.overflow=&quot;hidden&quot;,a.style.width=k+&quot;px&quot;,a.style.height=c+&quot;px&quot;,a.style[e]=&quot;horizontal&quot;,a.style[h]=&quot;auto&quot;,a.style[f]=m+&quot;px&quot;,a.style[g]=n+&quot;px&quot;,this.colWidth=n,this.gap=m,{pageWidth:this.spreadWidth,pageHeight:c}},EPUBJS.Layout.ReflowableSpreads.prototype.calculatePages=function(){var a=this.documentElement.scrollWidth,b=Math.ceil(a/this.spreadWidth);return this.documentElement.style.width=b*this.spreadWidth-this.gap+&quot;px&quot;,{displayedPages:b,pageCount:2*b}},EPUBJS.Layout.Fixed=function(){this.documentElement=null},EPUBJS.Layout.Fixed.prototype.format=function(a,b,c,d){var e,f,g,h,i=EPUBJS.core.prefixed(&quot;columnWidth&quot;),j=EPUBJS.core.prefixed(&quot;transform&quot;),k=EPUBJS.core.prefixed(&quot;transformOrigin&quot;),l=a.querySelector(&quot;[name=viewport]&quot;);this.documentElement=a,l&amp;&amp;l.hasAttribute(&quot;content&quot;)&amp;&amp;(e=l.getAttribute(&quot;content&quot;),f=e.split(&quot;,&quot;),f[0]&amp;&amp;(g=f[0].replace(&quot;width=&quot;,&quot;&quot;)),f[1]&amp;&amp;(h=f[1].replace(&quot;height=&quot;,&quot;&quot;)));var m=b/g,n=c/h,o=m&lt;n?m:n;return a.style.position=&quot;absolute&quot;,a.style.top=&quot;50%&quot;,a.style.left=&quot;50%&quot;,a.style[j]=&quot;scale(&quot;+o+&quot;) translate(-50%, -50%)&quot;,a.style[k]=&quot;0px 0px 0px&quot;,a.style.width=g+&quot;px&quot;||&quot;auto&quot;,a.style.height=h+&quot;px&quot;||&quot;auto&quot;,a.style[i]=&quot;auto&quot;,a.style.overflow=&quot;auto&quot;,this.colWidth=g,this.gap=0,{pageWidth:g,pageHeight:h}},EPUBJS.Layout.Fixed.prototype.calculatePages=function(){return{displayedPages:1,pageCount:1}},EPUBJS.Locations=function(a,b,c){this.spine=a,this.store=b,this.credentials=c,this.epubcfi=new EPUBJS.EpubCFI,this._locations=[],this.total=0,this.break=150,this._current=0},EPUBJS.Locations.prototype.generate=function(a){var b=new RSVP.defer,c=-1,d=this.spine.length,e=function(a){var b,f=c+1,g=a||new RSVP.defer;return f&gt;=d?g.resolve():(c=f,b=new EPUBJS.Chapter(this.spine[c],this.store,this.credentials),this.process(b).then(function(){setTimeout(function(){e(g)},1)})),g.promise}.bind(this);return&quot;number&quot;==typeof a&amp;&amp;(this.break=a),e().then(function(){this.total=this._locations.length-1,this._currentCfi&amp;&amp;(this.currentLocation=this._currentCfi),b.resolve(this._locations)}.bind(this)),b.promise},EPUBJS.Locations.prototype.process=function(a){return a.load().then(function(b){var c,d,e,f=b,g=f.documentElement.querySelector(&quot;body&quot;),h=0;this.sprint(g,function(b){var g,i=b.length,j=0;for(0===h&amp;&amp;(c=f.createRange(),c.setStart(b,0)),g=this.break-h,g&gt;i&amp;&amp;(h+=i,j=i);j&lt;i;)h=this.break,j+=this.break,j&gt;=i?h=i-(j-this.break):(c.setEnd(b,j),e=a.cfiFromRange(c),this._locations.push(e),h=0,j+=1,c=f.createRange(),c.setStart(b,j));d=b}.bind(this)),c&amp;&amp;(c.setEnd(d,d.length),e=a.cfiFromRange(c),this._locations.push(e),h=0)}.bind(this))},EPUBJS.Locations.prototype.sprint=function(a,b){for(var c,d=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);c=d.nextNode();)b(c)},EPUBJS.Locations.prototype.locationFromCfi=function(a){return 0===this._locations.length?-1:EPUBJS.core.locationOf(a,this._locations,this.epubcfi.compare)},EPUBJS.Locations.prototype.percentageFromCfi=function(a){var b=this.locationFromCfi(a);return this.percentageFromLocation(b)},EPUBJS.Locations.prototype.percentageFromLocation=function(a){return a&amp;&amp;this.total?a/this.total:0},EPUBJS.Locations.prototype.cfiFromLocation=function(a){var b=-1;return&quot;number&quot;!=typeof a&amp;&amp;(a=parseInt(a)),a&gt;=0&amp;&amp;a&lt;this._locations.length&amp;&amp;(b=this._locations[a]),b},EPUBJS.Locations.prototype.cfiFromPercentage=function(a){var b=a&gt;1?a/100:a,c=Math.ceil(this.total*b);return this.cfiFromLocation(c)},EPUBJS.Locations.prototype.load=function(a){return this._locations=JSON.parse(a),this.total=this._locations.length-1,this._locations},EPUBJS.Locations.prototype.save=function(a){return JSON.stringify(this._locations)},EPUBJS.Locations.prototype.getCurrent=function(a){return this._current},EPUBJS.Locations.prototype.setCurrent=function(a){var b;if(&quot;string&quot;==typeof a)this._currentCfi=a;else{if(&quot;number&quot;!=typeof a)return;this._current=a}0!==this._locations.length&amp;&amp;(&quot;string&quot;==typeof a?(b=this.locationFromCfi(a),this._current=b):b=a,this.trigger(&quot;changed&quot;,{percentage:this.percentageFromLocation(b)}))},Object.defineProperty(EPUBJS.Locations.prototype,&quot;currentLocation&quot;,{get:function(){return this._current},set:function(a){this.setCurrent(a)}}),RSVP.EventTarget.mixin(EPUBJS.Locations.prototype),EPUBJS.Pagination=function(a){this.pages=[],this.locations=[],this.epubcfi=new EPUBJS.EpubCFI,a&amp;&amp;a.length&amp;&amp;this.process(a)},EPUBJS.Pagination.prototype.process=function(a){a.forEach(function(a){this.pages.push(a.page),this.locations.push(a.cfi)},this),this.pageList=a,this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage},EPUBJS.Pagination.prototype.pageFromCfi=function(a){var b=-1;if(0===this.locations.length)return-1;var c=EPUBJS.core.indexOfSorted(a,this.locations,this.epubcfi.compare);return c!=-1?b=this.pages[c]:(c=EPUBJS.core.locationOf(a,this.locations,this.epubcfi.compare),void 0!==(b=c-1&gt;=0?this.pages[c-1]:this.pages[0])||(b=-1)),b},EPUBJS.Pagination.prototype.cfiFromPage=function(a){var b=-1;&quot;number&quot;!=typeof a&amp;&amp;(a=parseInt(a));var c=this.pages.indexOf(a);return c!=-1&amp;&amp;(b=this.locations[c]),b},EPUBJS.Pagination.prototype.pageFromPercentage=function(a){return Math.round(this.totalPages*a)},EPUBJS.Pagination.prototype.percentageFromPage=function(a){var b=(a-this.firstPage)/this.totalPages;return Math.round(1e3*b)/1e3},EPUBJS.Pagination.prototype.percentageFromCfi=function(a){var b=this.pageFromCfi(a);return this.percentageFromPage(b)},EPUBJS.Parser=function(a){this.baseUrl=a||&quot;&quot;},EPUBJS.Parser.prototype.container=function(a){var b,c,d,e;return a?(b=a.querySelector(&quot;rootfile&quot;))?(c=b.getAttribute(&quot;full-path&quot;),d=EPUBJS.core.uri(c).directory,e=a.xmlEncoding,{packagePath:c,basePath:d,encoding:e}):void console.error(&quot;No RootFile Found&quot;):void console.error(&quot;Container File Not Found&quot;)},EPUBJS.Parser.prototype.identifier=function(a){var b;return a?(b=a.querySelector(&quot;metadata&quot;),b?this.getElementText(b,&quot;identifier&quot;):void console.error(&quot;No Metadata Found&quot;)):void console.error(&quot;Package File Not Found&quot;)},EPUBJS.Parser.prototype.packageContents=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=this;return b&amp;&amp;(this.baseUrl=b),a?(c=a.querySelector(&quot;metadata&quot;))?(d=a.querySelector(&quot;manifest&quot;))?(e=a.querySelector(&quot;spine&quot;))?(f=n.manifest(d),g=n.findNavPath(d),h=n.findTocPath(d,e),i=n.findCoverPath(a),j=Array.prototype.indexOf.call(e.parentNode.childNodes,e),k=n.spine(e,f),l={},k.forEach(function(a){l[a.href]=a.index}),m=n.metadata(c),m.direction=e.getAttribute(&quot;page-progression-direction&quot;),{metadata:m,spine:k,manifest:f,navPath:g,tocPath:h,coverPath:i,spineNodeIndex:j,spineIndexByURL:l}):void console.error(&quot;No Spine Found&quot;):void console.error(&quot;No Manifest Found&quot;):void console.error(&quot;No Metadata Found&quot;):void console.error(&quot;Package File Not Found&quot;)},EPUBJS.Parser.prototype.findNavPath=function(a){var b=a.querySelector(&quot;item[properties$=&#39;nav&#39;], item[properties^=&#39;nav &#39;], item[properties*=&#39; nav &#39;]&quot;);return!!b&amp;&amp;b.getAttribute(&quot;href&quot;)},EPUBJS.Parser.prototype.findTocPath=function(a,b){var c,d=a.querySelector(&quot;item[media-type=&#39;application/x-dtbncx+xml&#39;]&quot;);return d||(c=b.getAttribute(&quot;toc&quot;))&amp;&amp;(d=a.querySelector(&quot;item[id=&#39;&quot;+c+&quot;&#39;]&quot;)),!!d&amp;&amp;d.getAttribute(&quot;href&quot;)},EPUBJS.Parser.prototype.metadata=function(a){var b={},c=this;return b.bookTitle=c.getElementText(a,&quot;title&quot;),b.creator=c.getElementText(a,&quot;creator&quot;),b.description=c.getElementText(a,&quot;description&quot;),b.pubdate=c.getElementText(a,&quot;date&quot;),b.publisher=c.getElementText(a,&quot;publisher&quot;),b.identifier=c.getElementText(a,&quot;identifier&quot;),b.language=c.getElementText(a,&quot;language&quot;),b.rights=c.getElementText(a,&quot;rights&quot;),b.modified_date=c.querySelectorText(a,&quot;meta[property=&#39;dcterms:modified&#39;]&quot;),b.layout=c.querySelectorText(a,&quot;meta[property=&#39;rendition:layout&#39;]&quot;),b.orientation=c.querySelectorText(a,&quot;meta[property=&#39;rendition:orientation&#39;]&quot;),b.spread=c.querySelectorText(a,&quot;meta[property=&#39;rendition:spread&#39;]&quot;),b},EPUBJS.Parser.prototype.findCoverPath=function(a){if(&quot;2.0&quot;===a.querySelector(&quot;package&quot;).getAttribute(&quot;version&quot;)){var b=a.querySelector(&#39;meta[name=&quot;cover&quot;]&#39;);if(b){var c=b.getAttribute(&quot;content&quot;),d=a.querySelector(&quot;item[id=&#39;&quot;+c+&quot;&#39;]&quot;);return!!d&amp;&amp;d.getAttribute(&quot;href&quot;)}return!1}var e=a.querySelector(&quot;item[properties=&#39;cover-image&#39;]&quot;);return!!e&amp;&amp;e.getAttribute(&quot;href&quot;)},EPUBJS.Parser.prototype.getElementText=function(a,b){var c,d=a.getElementsByTagNameNS(&quot;http://purl.org/dc/elements/1.1/&quot;,b);return d&amp;&amp;0!==d.length?(c=d[0],c.childNodes.length?c.childNodes[0].nodeValue:&quot;&quot;):&quot;&quot;},EPUBJS.Parser.prototype.querySelectorText=function(a,b){var c=a.querySelector(b);return c&amp;&amp;c.childNodes.length?c.childNodes[0].nodeValue:&quot;&quot;},EPUBJS.Parser.prototype.manifest=function(a){var b=this.baseUrl,c={},d=a.querySelectorAll(&quot;item&quot;);return Array.prototype.slice.call(d).forEach(function(a){var d=a.getAttribute(&quot;id&quot;),e=a.getAttribute(&quot;href&quot;)||&quot;&quot;,f=a.getAttribute(&quot;media-type&quot;)||&quot;&quot;,g=a.getAttribute(&quot;properties&quot;)||&quot;&quot;;c[d]={href:e,url:b+e,type:f,properties:g}}),c},EPUBJS.Parser.prototype.spine=function(a,b){var c=a.getElementsByTagName(&quot;itemref&quot;),d=Array.prototype.slice.call(c),e=EPUBJS.core.indexOfElementNode(a),f=new EPUBJS.EpubCFI;return d.map(function(a,c){var d=a.getAttribute(&quot;idref&quot;),g=f.generateChapterComponent(e,c,d),h=a.getAttribute(&quot;properties&quot;)||&quot;&quot;,i=h.length?h.split(&quot; &quot;):[],j=b[d].properties,k=j.length?j.split(&quot; &quot;):[];return{id:d,linear:a.getAttribute(&quot;linear&quot;)||&quot;&quot;,properties:i,manifestProperties:k,href:b[d].href,url:b[d].url,index:c,cfiBase:g,cfi:&quot;epubcfi(&quot;+g+&quot;)&quot;}})},EPUBJS.Parser.prototype.querySelectorByType=function(a,b,c){var d=a.querySelector(b+&#39;[*|type=&quot;&#39;+c+&#39;&quot;]&#39;);if(null!==d&amp;&amp;0!==d.length)return d;d=a.querySelectorAll(b);for(var e=0;e&lt;d.length;e++)if(d[e].getAttributeNS(&quot;http://www.idpf.org/2007/ops&quot;,&quot;type&quot;)===c)return d[e]},EPUBJS.Parser.prototype.nav=function(a,b,c){var d=this.querySelectorByType(a,&quot;nav&quot;,&quot;toc&quot;);return this.navItems(d,b,c)},EPUBJS.Parser.prototype.navItems=function(a,b,c){if(!a)return[];var d=a.querySelector(&quot;ol&quot;);if(!d)return[];var e=d.childNodes,f=[];return Array.prototype.forEach.call(e,function(a){if(&quot;li&quot;===a.tagName){var d=a.querySelector(&quot;a, span&quot;),e=d.getAttribute(&quot;href&quot;)||&quot;&quot;,g=d.textContent||&quot;&quot;,h=e.split(&quot;#&quot;),i=h[0],j=b[i],k=c[j],l=k?k.cfi:&quot;&quot;,m=this.navItems(a,b,c);f.push({href:e,label:g,spinePos:j,subitems:m,cfi:l})}}.bind(this)),f},EPUBJS.Parser.prototype.toc=function(a,b,c){var d,e,f,g=a.querySelectorAll(&quot;navMap navPoint&quot;),h=g.length,i={},j=[];if(!g||0===h)return j;for(d=0;d&lt;h;++d)e=this.tocItem(g[d],b,c),i[e.id]=e,e.parent?(f=i[e.parent],f.subitems.push(e)):j.push(e);return j},EPUBJS.Parser.prototype.tocItem=function(a,b,c){var d,e=a.getAttribute(&quot;id&quot;)||!1,f=a.querySelector(&quot;content&quot;),g=f.getAttribute(&quot;src&quot;),h=a.querySelector(&quot;navLabel&quot;),i=h.textContent?h.textContent:&quot;&quot;,j=g.split(&quot;#&quot;),k=j[0],l=b[k],m=c[l],n=[],o=a.parentNode,p=m?m.cfi:&quot;&quot;;return o&amp;&amp;&quot;navPoint&quot;===o.nodeName&amp;&amp;(d=o.getAttribute(&quot;id&quot;)),e||(l?(m=c[l],e=m.id,p=m.cfi):(e=&quot;epubjs-autogen-toc-id-&quot;+EPUBJS.core.uuid(),a.setAttribute(&quot;id&quot;,e))),{id:e,href:g,label:i,spinePos:l,subitems:n,parent:d,cfi:p}},EPUBJS.Parser.prototype.pageList=function(a,b,c){var d,e,f=this.querySelectorByType(a,&quot;nav&quot;,&quot;page-list&quot;),g=f?f.querySelectorAll(&quot;ol li&quot;):[],h=g.length,i=[];if(!g||0===h)return i;for(d=0;d&lt;h;++d)e=this.pageListItem(g[d],b,c),i.push(e);return i},EPUBJS.Parser.prototype.pageListItem=function(a,b,c){var d,e,f,g=(a.getAttribute(&quot;id&quot;),a.querySelector(&quot;a&quot;)),h=g.getAttribute(&quot;href&quot;)||&quot;&quot;,i=g.textContent||&quot;&quot;,j=parseInt(i),k=h.indexOf(&quot;epubcfi&quot;);return k!=-1?(d=h.split(&quot;#&quot;),e=d[0],f=d.length&gt;1&amp;&amp;d[1],{cfi:f,href:h,packageUrl:e,page:j}):{href:h,page:j}},EPUBJS.Render.Iframe=function(){this.iframe=null,this.document=null,this.window=null,this.docEl=null,this.bodyEl=null,this.leftPos=0,this.pageWidth=0,this.id=EPUBJS.core.uuid()},EPUBJS.Render.Iframe.prototype.create=function(){return this.element=document.createElement(&quot;div&quot;),this.element.id=&quot;epubjs-view:&quot;+this.id,this.isMobile=navigator.userAgent.match(/(iPad|iPhone|iPod|Mobile|Android)/g),this.transform=EPUBJS.core.prefixed(&quot;transform&quot;),this.element},EPUBJS.Render.Iframe.prototype.addIframe=function(){return this.iframe=document.createElement(&quot;iframe&quot;),this.iframe.id=&quot;epubjs-iframe:&quot;+this.id,this.iframe.scrolling=this.scrolling||&quot;no&quot;,this.iframe.seamless=&quot;seamless&quot;,this.iframe.style.border=&quot;none&quot;,this.iframe.addEventListener(&quot;load&quot;,this.loaded.bind(this),!1),(this._width||this._height)&amp;&amp;(this.iframe.height=this._height,this.iframe.width=this._width),this.iframe},EPUBJS.Render.Iframe.prototype.load=function(a,b){var c=this,d=new RSVP.defer;return this.window&amp;&amp;this.unload(),this.iframe&amp;&amp;this.element.removeChild(this.iframe),this.iframe=this.addIframe(),this.element.appendChild(this.iframe),this.iframe.onload=function(a){c.document=c.iframe.contentDocument,c.docEl=c.document.documentElement,c.headEl=c.document.head,c.bodyEl=c.document.body||c.document.querySelector(&quot;body&quot;),c.window=c.iframe.contentWindow,c.window.addEventListener(&quot;resize&quot;,c.resized.bind(c),!1),c.leftPos=0,c.setLeft(0),c.bodyEl&amp;&amp;(c.bodyEl.style.margin=&quot;0&quot;),d.resolve(c.docEl)},this.iframe.onerror=function(a){d.reject({message:&quot;Error Loading Contents: &quot;+a,stack:(new Error).stack})},this.document=this.iframe.contentDocument,this.document?(this.iframe.contentDocument.open(),this.iframe.contentDocument.write(a),this.iframe.contentDocument.close(),d.promise):(d.reject(new Error(&quot;No Document Available&quot;)),d.promise)},EPUBJS.Render.Iframe.prototype.loaded=function(a){var b,c,d=this.iframe.contentWindow.location.href;this.document=this.iframe.contentDocument,this.docEl=this.document.documentElement,this.headEl=this.document.head,this.bodyEl=this.document.body||this.document.querySelector(&quot;body&quot;),this.window=this.iframe.contentWindow,this.window.focus(),&quot;about:blank&quot;!=d&amp;&amp;(b=this.iframe.contentDocument.querySelector(&quot;base&quot;),c=b.getAttribute(&quot;href&quot;),this.trigger(&quot;render:loaded&quot;,c))},EPUBJS.Render.Iframe.prototype.resize=function(a,b){this.element&amp;&amp;(this.element.style.height=b,isNaN(a)||a%2==0||(a+=1),this.element.style.width=a,this.iframe&amp;&amp;(this.iframe.height=b,this.iframe.width=a),this._height=b,this._width=a,this.width=this.element.getBoundingClientRect().width||a,this.height=this.element.getBoundingClientRect().height||b)},EPUBJS.Render.Iframe.prototype.resized=function(a){this.width=this.iframe.getBoundingClientRect().width,this.height=this.iframe.getBoundingClientRect().height},EPUBJS.Render.Iframe.prototype.totalWidth=function(){return this.docEl.scrollWidth},EPUBJS.Render.Iframe.prototype.totalHeight=function(){return this.docEl.scrollHeight},EPUBJS.Render.Iframe.prototype.setPageDimensions=function(a,b){this.pageWidth=a,this.pageHeight=b},EPUBJS.Render.Iframe.prototype.setDirection=function(a){this.direction=a,this.docEl&amp;&amp;&quot;rtl&quot;==this.docEl.dir&amp;&amp;(this.docEl.dir=&quot;rtl&quot;,&quot;pre-paginated&quot;!==this.layout&amp;&amp;(this.docEl.style.position=&quot;static&quot;,this.docEl.style.right=&quot;auto&quot;))},EPUBJS.Render.Iframe.prototype.setLeft=function(a){this.isMobile?this.docEl.style[this.transform]=&quot;translate(&quot;+-a+&quot;px, 0)&quot;:this.document.defaultView.scrollTo(a,0)},EPUBJS.Render.Iframe.prototype.setLayout=function(a){this.layout=a},EPUBJS.Render.Iframe.prototype.setStyle=function(a,b,c){c&amp;&amp;(a=EPUBJS.core.prefixed(a)),this.bodyEl&amp;&amp;(this.bodyEl.style[a]=b)},EPUBJS.Render.Iframe.prototype.removeStyle=function(a){this.bodyEl&amp;&amp;(this.bodyEl.style[a]=&quot;&quot;)},EPUBJS.Render.Iframe.prototype.setClasses=function(a){this.bodyEl&amp;&amp;(this.bodyEl.className=a.join(&quot; &quot;))},EPUBJS.Render.Iframe.prototype.addHeadTag=function(a,b,c){var d=c||this.document,e=d.createElement(a),f=d.head;for(var g in b)e.setAttribute(g,b[g]);f&amp;&amp;f.insertBefore(e,f.firstChild)},EPUBJS.Render.Iframe.prototype.page=function(a){this.leftPos=this.pageWidth*(a-1),&quot;rtl&quot;===this.direction&amp;&amp;(this.leftPos=this.leftPos*-1),this.setLeft(this.leftPos)},EPUBJS.Render.Iframe.prototype.getPageNumberByElement=function(a){var b;if(a)return b=this.leftPos+a.getBoundingClientRect().left,Math.floor(b/this.pageWidth)+1},EPUBJS.Render.Iframe.prototype.getPageNumberByRect=function(a){var b;return b=this.leftPos+a.left,Math.floor(b/this.pageWidth)+1},EPUBJS.Render.Iframe.prototype.getBaseElement=function(){return this.bodyEl},EPUBJS.Render.Iframe.prototype.getDocumentElement=function(){return this.docEl},EPUBJS.Render.Iframe.prototype.isElementVisible=function(a){var b,c;return!!(a&amp;&amp;&quot;function&quot;==typeof a.getBoundingClientRect&amp;&amp;(b=a.getBoundingClientRect(),c=b.left,0!==b.width&amp;&amp;0!==b.height&amp;&amp;c&gt;=0&amp;&amp;c&lt;this.pageWidth))},EPUBJS.Render.Iframe.prototype.scroll=function(a){this.scrolling=a?&quot;yes&quot;:&quot;no&quot;},EPUBJS.Render.Iframe.prototype.unload=function(){this.window.removeEventListener(&quot;resize&quot;,this.resized),this.iframe.removeEventListener(&quot;load&quot;,this.loaded)},RSVP.EventTarget.mixin(EPUBJS.Render.Iframe.prototype),EPUBJS.Renderer=function(a,b){this.listenedEvents=[&quot;keydown&quot;,&quot;keyup&quot;,&quot;keypressed&quot;,&quot;mouseup&quot;,&quot;mousedown&quot;,&quot;click&quot;],this.upEvent=&quot;mouseup&quot;,this.downEvent=&quot;mousedown&quot;,&quot;ontouchstart&quot;in document.documentElement&amp;&amp;(this.listenedEvents.push(&quot;touchstart&quot;,&quot;touchend&quot;),this.upEvent=&quot;touchend&quot;,this.downEvent=&quot;touchstart&quot;),a&amp;&amp;void 0!==EPUBJS.Render[a]?this.render=new EPUBJS.Render[a]:console.error(&quot;Not a Valid Rendering Method&quot;),this.render.on(&quot;render:loaded&quot;,this.loaded.bind(this)),this.caches={},this.epubcfi=new EPUBJS.EpubCFI,this.spreads=!0,this.isForcedSingle=!1,this.resized=this.onResized.bind(this),this.layoutSettings={},this.hidden=b||!1,EPUBJS.Hooks.mixin(this),this.getHooks(&quot;beforeChapterDisplay&quot;),this._q=EPUBJS.core.queue(this),this._moving=!1},EPUBJS.Renderer.prototype.Events=[&quot;renderer:keydown&quot;,&quot;renderer:keyup&quot;,&quot;renderer:keypressed&quot;,&quot;renderer:mouseup&quot;,&quot;renderer:mousedown&quot;,&quot;renderer:click&quot;,&quot;renderer:touchstart&quot;,&quot;renderer:touchend&quot;,&quot;renderer:selected&quot;,&quot;renderer:chapterUnload&quot;,&quot;renderer:chapterUnloaded&quot;,&quot;renderer:chapterDisplayed&quot;,&quot;renderer:locationChanged&quot;,&quot;renderer:visibleLocationChanged&quot;,&quot;renderer:visibleRangeChanged&quot;,&quot;renderer:resized&quot;,&quot;renderer:spreads&quot;,&quot;renderer:beforeResize&quot;],EPUBJS.Renderer.prototype.initialize=function(a,b,c){this.container=a,this.element=this.render.create(),this.initWidth=b,this.initHeight=c,this.width=b||this.container.clientWidth,this.height=c||this.container.clientHeight,this.container.appendChild(this.element),b&amp;&amp;c?this.render.resize(this.width,this.height):this.render.resize(&quot;100%&quot;,&quot;100%&quot;),document.addEventListener(&quot;orientationchange&quot;,this.onResized.bind(this))},EPUBJS.Renderer.prototype.displayChapter=function(a,b){if(this._moving){console.warning(&quot;Rendering In Progress&quot;);var c=new RSVP.defer;return c.reject({message:&quot;Rendering In Progress&quot;,stack:(new Error).stack}),c.promise}return this._moving=!0,a.render().then(function(c){return this.currentChapter&amp;&amp;(this.trigger(&quot;renderer:chapterUnload&quot;),this.currentChapter.unload(),this.render.window&amp;&amp;this.render.window.removeEventListener(&quot;resize&quot;,this.resized),this.removeEventListeners(),this.removeSelectionListeners(),this.trigger(&quot;renderer:chapterUnloaded&quot;),this.contents=null,this.doc=null,this.pageMap=null),this.currentChapter=a,this.chapterPos=1,this.currentChapterCfiBase=a.cfiBase,this.layoutSettings=this.reconcileLayoutSettings(b,a.properties),this.load(c,a.href)}.bind(this),function(){this._moving=!1}.bind(this))},EPUBJS.Renderer.prototype.load=function(a,b){var c=new RSVP.defer;return this.layoutMethod=this.determineLayout(this.layoutSettings),this.layout=new EPUBJS.Layout[this.layoutMethod],this.visible(!1),this.render.load(a,b).then(function(a){EPUBJS.Layout.isFixedLayout(a)&amp;&amp;(this.layoutSettings.layout=&quot;pre-paginated&quot;,this.layoutMethod=this.determineLayout(this.layoutSettings),this.layout=new EPUBJS.Layout[this.layoutMethod]),this.render.setLayout(this.layoutSettings.layout),&quot;rtl&quot;==this.render.direction&amp;&amp;&quot;rtl&quot;!=this.render.docEl.dir&amp;&amp;(this.render.docEl.dir=&quot;rtl&quot;,&quot;pre-paginated&quot;!==this.render.layout&amp;&amp;(this.render.docEl.style.position=&quot;absolute&quot;,this.render.docEl.style.right=&quot;0&quot;)),this.afterLoad(a),this.beforeDisplay(function(){this.afterDisplay(),this.visible(!0),c.resolve(this)}.bind(this))}.bind(this)),c.promise},EPUBJS.Renderer.prototype.afterLoad=function(a){this.contents=a,this.doc=this.render.document,this.formated=this.layout.format(a,this.render.width,this.render.height,this.gap),this.render.setPageDimensions(this.formated.pageWidth,this.formated.pageHeight),this.initWidth||this.initHeight||this.render.window.addEventListener(&quot;resize&quot;,this.resized,!1),this.addEventListeners(),this.addSelectionListeners()},EPUBJS.Renderer.prototype.afterDisplay=function(a){var b=this.layout.calculatePages(),c=this.currentChapter,d=this._q.length();this._moving=!1,this.updatePages(b),this.visibleRangeCfi=this.getVisibleRangeCfi(),this.currentLocationCfi=this.visibleRangeCfi.start,0===d&amp;&amp;(this.trigger(&quot;renderer:locationChanged&quot;,this.currentLocationCfi),this.trigger(&quot;renderer:visibleRangeChanged&quot;,this.visibleRangeCfi)),c.cfi=this.currentLocationCfi,this.trigger(&quot;renderer:chapterDisplayed&quot;,c)},EPUBJS.Renderer.prototype.loaded=function(a){this.trigger(&quot;render:loaded&quot;,a)},EPUBJS.Renderer.prototype.reconcileLayoutSettings=function(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&amp;&amp;(c[d]=a[d]);return b.forEach(function(a){var b,d,e=a.replace(&quot;rendition:&quot;,&quot;&quot;),f=e.indexOf(&quot;-&quot;);f!=-1&amp;&amp;(b=e.slice(0,f),d=e.slice(f+1),c[b]=d)}),c},EPUBJS.Renderer.prototype.determineLayout=function(a){var b=this.determineSpreads(this.minSpreadWidth),c=b?&quot;ReflowableSpreads&quot;:&quot;Reflowable&quot;,d=!1;return&quot;pre-paginated&quot;===a.layout&amp;&amp;(c=&quot;Fixed&quot;,d=!0,b=!1),&quot;reflowable&quot;===a.layout&amp;&amp;&quot;none&quot;===a.spread&amp;&amp;(c=&quot;Reflowable&quot;,d=!1,b=!1),&quot;reflowable&quot;===a.layout&amp;&amp;&quot;both&quot;===a.spread&amp;&amp;(c=&quot;ReflowableSpreads&quot;,d=!1,b=!0),this.spreads=b,this.render.scroll(d),this.trigger(&quot;renderer:spreads&quot;,b),c},EPUBJS.Renderer.prototype.beforeDisplay=function(a,b){this.triggerHooks(&quot;beforeChapterDisplay&quot;,a,this)},EPUBJS.Renderer.prototype.updatePages=function(a){this.pageMap=this.mapPage(),this.spreads?this.displayedPages=Math.ceil(this.pageMap.length/2):this.displayedPages=this.pageMap.length,this.currentChapter.pages=this.pageMap.length,this._q.flush()},EPUBJS.Renderer.prototype.reformat=function(){var a,b,c=this;this.contents&amp;&amp;(b=this.determineSpreads(this.minSpreadWidth),b!=this.spreads&amp;&amp;(this.spreads=b,this.layoutMethod=this.determineLayout(this.layoutSettings),this.layout=new EPUBJS.Layout[this.layoutMethod]),this.chapterPos=1,this.render.page(this.chapterPos),c.formated=c.layout.format(c.render.docEl,c.render.width,c.render.height,c.gap),c.render.setPageDimensions(c.formated.pageWidth,c.formated.pageHeight),a=c.layout.calculatePages(),c.updatePages(a),c.currentLocationCfi&amp;&amp;c.gotoCfi(c.currentLocationCfi))},EPUBJS.Renderer.prototype.visible=function(a){if(void 0===a)return this.element.style.visibility;a!==!0||this.hidden?a===!1&amp;&amp;(this.element.style.visibility=&quot;hidden&quot;):this.element.style.visibility=&quot;visible&quot;},EPUBJS.Renderer.prototype.remove=function(){this.render.window&amp;&amp;(this.render.unload(),this.render.window.removeEventListener(&quot;resize&quot;,this.resized),this.removeEventListeners(),this.removeSelectionListeners()),this.container.removeChild(this.element)},EPUBJS.Renderer.prototype.applyStyles=function(a){for(var b in a)this.render.setStyle(b,a[b])},EPUBJS.Renderer.prototype.setStyle=function(a,b,c){this.render.setStyle(a,b,c)},EPUBJS.Renderer.prototype.removeStyle=function(a){this.render.removeStyle(a)},EPUBJS.Renderer.prototype.setClasses=function(a){this.render.setClasses(a)},EPUBJS.Renderer.prototype.applyHeadTags=function(a){for(var b in a)this.render.addHeadTag(b,a[b])},EPUBJS.Renderer.prototype.page=function(a){return this.pageMap?a&gt;=1&amp;&amp;a&lt;=this.displayedPages&amp;&amp;(this.chapterPos=a,this.render.page(a),this.visibleRangeCfi=this.getVisibleRangeCfi(),this.currentLocationCfi=this.visibleRangeCfi.start,this.trigger(&quot;renderer:locationChanged&quot;,this.currentLocationCfi),this.trigger(&quot;renderer:visibleRangeChanged&quot;,this.visibleRangeCfi),!0):(console.warn(&quot;pageMap not set, queuing&quot;),this._q.enqueue(&quot;page&quot;,arguments),!0)},EPUBJS.Renderer.prototype.nextPage=function(){return this.page(this.chapterPos+1)},EPUBJS.Renderer.prototype.prevPage=function(){return this.page(this.chapterPos-1)},EPUBJS.Renderer.prototype.pageByElement=function(a){var b;a&amp;&amp;(b=this.render.getPageNumberByElement(a),this.page(b))},EPUBJS.Renderer.prototype.lastPage=function(){if(this._moving)return this._q.enqueue(&quot;lastPage&quot;,arguments);this.page(this.displayedPages)},EPUBJS.Renderer.prototype.firstPage=function(){if(this._moving)return this._q.enqueue(&quot;firstPage&quot;,arguments);this.page(1)},EPUBJS.Renderer.prototype.section=function(a){var b=this.doc.getElementById(a);b&amp;&amp;this.pageByElement(b)},EPUBJS.Renderer.prototype.firstElementisTextNode=function(a){var b=a.childNodes;return!!(b.length&amp;&amp;b[0]&amp;&amp;3===b[0].nodeType&amp;&amp;b[0].textContent.trim().length)},EPUBJS.Renderer.prototype.isGoodNode=function(a){return[&quot;audio&quot;,&quot;canvas&quot;,&quot;embed&quot;,&quot;iframe&quot;,&quot;img&quot;,&quot;math&quot;,&quot;object&quot;,&quot;svg&quot;,&quot;video&quot;].indexOf(a.tagName.toLowerCase())!==-1||this.firstElementisTextNode(a)},EPUBJS.Renderer.prototype.walk=function(a,b,c){for(var d,e,f,g,h=a,i=[h],j=1e4,k=0;!d&amp;&amp;i.length;){if(a=i.shift(),this.containsPoint(a,b,c)&amp;&amp;this.isGoodNode(a)&amp;&amp;(d=a),!d&amp;&amp;a&amp;&amp;a.childElementCount&gt;0){if(!(e=a.children)||!e.length)return d;f=e.length?e.length:0;for(var l=f-1;l&gt;=0;l--)e[l]!=g&amp;&amp;i.unshift(e[l])}if(!d&amp;&amp;0===i.length&amp;&amp;h&amp;&amp;null!==h.parentNode&amp;&amp;(i.push(h.parentNode),g=h,h=h.parentNode),++k&gt;j){console.error(&quot;ENDLESS LOOP&quot;);break}}return d},EPUBJS.Renderer.prototype.containsPoint=function(a,b,c){var d;return!!(a&amp;&amp;&quot;function&quot;==typeof a.getBoundingClientRect&amp;&amp;(d=a.getBoundingClientRect(),0!==d.width&amp;&amp;0!==d.height&amp;&amp;d.left&gt;=b&amp;&amp;b&lt;=d.left+d.width))},EPUBJS.Renderer.prototype.textSprint=function(a,b){var c,d,e=function(a){return/^\s*$/.test(a.data)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT};try{for(c=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,{acceptNode:e},!1);d=c.nextNode();)b(d)}catch(f){for(c=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,e,!1);d=c.nextNode();)b(d)}},EPUBJS.Renderer.prototype.sprint=function(a,b){for(var c,d=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,null,!1);c=d.nextNode();)b(c)},EPUBJS.Renderer.prototype.mapPage=function(){var a,b,c,d,e,f,g,h,i=this,j=[],k=this.render.getBaseElement(),l=1,m=this.layout.colWidth+this.layout.gap,n=this.formated.pageWidth*(this.chapterPos-1),o=m*l-n,p=0,q=function(b){var c,e,f;if(b.nodeType==Node.TEXT_NODE){if(e=document.createRange(),e.selectNodeContents(b),!(c=e.getBoundingClientRect())||0===c.width&amp;&amp;0===c.height)return;c.left&gt;p&amp;&amp;(f=r(b)),c.right&gt;p&amp;&amp;(f=r(b)),d=b,f&amp;&amp;(a=null)}},r=function(e){var f;return i.splitTextNodeIntoWordsRanges(e).forEach(function(e){var g=e.getBoundingClientRect();!g||0===g.width&amp;&amp;0===g.height||(g.left+g.width&lt;o?j[l-1]||(e.collapse(!0),c=i.currentChapter.cfiFromRange(e),f=j.push({start:c,end:null})):(!a&amp;&amp;d&amp;&amp;(b=i.splitTextNodeIntoWordsRanges(d),a=b[b.length-1]),a&amp;&amp;j.length&amp;&amp;(a.collapse(!1),c=i.currentChapter.cfiFromRange(a),j[j.length-1]&amp;&amp;(j[j.length-1].end=c)),e.collapse(!0),c=i.currentChapter.cfiFromRange(e),f=j.push({start:c,end:null}),l+=1,o=m*l-n,p=o),a=e)}),f},s=this.render.getDocumentElement(),t=s.dir;return&quot;rtl&quot;==t&amp;&amp;(s.dir=&quot;ltr&quot;,&quot;pre-paginated&quot;!==this.layoutSettings.layout&amp;&amp;(s.style.position=&quot;static&quot;)),this.textSprint(k,q),&quot;rtl&quot;==t&amp;&amp;(s.dir=t,&quot;pre-paginated&quot;!==this.layoutSettings.layout&amp;&amp;(s.style.left=&quot;auto&quot;,s.style.right=&quot;0&quot;)),!a&amp;&amp;d&amp;&amp;(b=i.splitTextNodeIntoWordsRanges(d),a=b[b.length-1]),a&amp;&amp;(a.collapse(!1),c=i.currentChapter.cfiFromRange(a),j[j.length-1].end=c),j.length||(e=this.doc.createRange(),e.selectNodeContents(k),e.collapse(!0),g=i.currentChapter.cfiFromRange(e),f=this.doc.createRange(),f.selectNodeContents(k),f.collapse(!1),h=i.currentChapter.cfiFromRange(f),j.push({start:g,end:h})),a=null,b=void 0,e=null,f=null,k=null,j},EPUBJS.Renderer.prototype.indexOfBreakableChar=function(a,b){var c=&quot;- \t\r\n\b\f&quot;;b||(b=0);for(var d=b;d&lt;a.length;d++)if(c.indexOf(a.charAt(d))!=-1)return d;return-1},EPUBJS.Renderer.prototype.splitTextNodeIntoWordsRanges=function(a){var b,c=[],d=a.textContent.trim(),e=this.indexOfBreakableChar(d);if(e===-1)return b=this.doc.createRange(),b.selectNodeContents(a),[b];for(b=this.doc.createRange(),b.setStart(a,0),b.setEnd(a,e),c.push(b),b=this.doc.createRange(),b.setStart(a,e+1);e!=-1;)(e=this.indexOfBreakableChar(d,e+1))&gt;0&amp;&amp;(b&amp;&amp;(b.setEnd(a,e),c.push(b)),b=this.doc.createRange(),b.setStart(a,e+1));return b&amp;&amp;(b.setEnd(a,d.length),c.push(b)),c},EPUBJS.Renderer.prototype.rangePosition=function(a){var b;return b=a.getClientRects(),b.length?b[0]:null},EPUBJS.Renderer.prototype.getPageCfi=function(){var a=2*this.chapterPos-1;return this.pageMap[a].start},EPUBJS.Renderer.prototype.getRange=function(a,b,c){var d,e=this.doc.createRange();return c=!0,void 0===document.caretPositionFromPoint||c?void 0===document.caretRangeFromPoint||c?(this.visibileEl=this.findElementAfter(a,b),e.setStart(this.visibileEl,1)):e=this.doc.caretRangeFromPoint(a,b):(d=this.doc.caretPositionFromPoint(a,b),e.setStart(d.offsetNode,d.offset)),e},EPUBJS.Renderer.prototype.pagesInCurrentChapter=function(){return this.pageMap?this.pageMap.length:(console.warn(&quot;page map not loaded&quot;),!1)},EPUBJS.Renderer.prototype.currentRenderedPage=function(){return this.pageMap?this.spreads&amp;&amp;this.pageMap.length&gt;1?2*this.chapterPos-1:this.chapterPos:(console.warn(&quot;page map not loaded&quot;),!1)},EPUBJS.Renderer.prototype.getRenderedPagesLeft=function(){var a,b;return this.pageMap?(b=this.pageMap.length,a=this.spreads?2*this.chapterPos-1:this.chapterPos,b-a):(console.warn(&quot;page map not loaded&quot;),!1)},EPUBJS.Renderer.prototype.getVisibleRangeCfi=function(){var a,b,c;return this.pageMap?(this.spreads?(a=2*this.chapterPos,b=this.pageMap[a-2],c=b,this.pageMap.length&gt;1&amp;&amp;this.pageMap.length&gt;a-1&amp;&amp;(c=this.pageMap[a-1])):(a=this.chapterPos,b=this.pageMap[a-1],c=b),b||(console.warn(&quot;page range miss:&quot;,a,this.pageMap),b=this.pageMap[this.pageMap.length-1],c=b),{start:b.start,end:c.end}):(console.warn(&quot;page map not loaded&quot;),!1)},EPUBJS.Renderer.prototype.gotoCfi=function(a){var b,c,d;if(this._moving)return this._q.enqueue(&quot;gotoCfi&quot;,arguments);if(EPUBJS.core.isString(a)&amp;&amp;(a=this.epubcfi.parse(a)),void 0===document.evaluate)(c=this.epubcfi.addMarker(a,this.doc))&amp;&amp;(b=this.render.getPageNumberByElement(c),this.epubcfi.removeMarker(c,this.doc),this.page(b));else if(d=this.epubcfi.generateRangeFromCfi(a,this.doc)){var e=d.getBoundingClientRect();b=e?this.render.getPageNumberByRect(e):1,this.page(b),this.currentLocationCfi=a.str}else this.page(1)},EPUBJS.Renderer.prototype.findFirstVisible=function(a){var b,c=a||this.render.getBaseElement();return b=this.walk(c,0,0),b?b:a},EPUBJS.Renderer.prototype.findElementAfter=function(a,b,c){var d,e=c||this.render.getBaseElement();return d=this.walk(e,a,b),d?d:e},EPUBJS.Renderer.prototype.resize=function(a,b,c){this.width=a,this.height=b,c!==!1&amp;&amp;this.render.resize(this.width,this.height),this.contents&amp;&amp;this.reformat(),this.trigger(&quot;renderer:resized&quot;,{width:this.width,height:this.height})},EPUBJS.Renderer.prototype.onResized=function(a){this.trigger(&quot;renderer:beforeResize&quot;);var b=this.container.clientWidth,c=this.container.clientHeight;this.resize(b,c,!1)},EPUBJS.Renderer.prototype.addEventListeners=function(){this.render.document&amp;&amp;this.listenedEvents.forEach(function(a){this.render.document.addEventListener(a,this.triggerEvent.bind(this),!1)},this)},EPUBJS.Renderer.prototype.removeEventListeners=function(){this.render.document&amp;&amp;this.listenedEvents.forEach(function(a){this.render.document.removeEventListener(a,this.triggerEvent,!1)},this)},EPUBJS.Renderer.prototype.triggerEvent=function(a){this.trigger(&quot;renderer:&quot;+a.type,a)},EPUBJS.Renderer.prototype.addSelectionListeners=function(){this.render.document.addEventListener(&quot;selectionchange&quot;,this.onSelectionChange.bind(this),!1)},EPUBJS.Renderer.prototype.removeSelectionListeners=function(){this.render.document&amp;&amp;this.doc.removeEventListener(&quot;selectionchange&quot;,this.onSelectionChange,!1)},EPUBJS.Renderer.prototype.onSelectionChange=function(a){this.selectionEndTimeout&amp;&amp;clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){this.selectedRange=this.render.window.getSelection(),this.trigger(&quot;renderer:selected&quot;,this.selectedRange)}.bind(this),500)},EPUBJS.Renderer.prototype.setMinSpreadWidth=function(a){this.minSpreadWidth=a,this.spreads=this.determineSpreads(a)},EPUBJS.Renderer.prototype.determineSpreads=function(a){return!(this.isForcedSingle||!a||this.width&lt;a)},EPUBJS.Renderer.prototype.forceSingle=function(a){this.isForcedSingle=!!a},EPUBJS.Renderer.prototype.setGap=function(a){this.gap=a},EPUBJS.Renderer.prototype.setDirection=function(a){this.direction=a,this.render.setDirection(this.direction)};EPUBJS.Renderer.prototype.replace=function(a,b,c,d){var e=this.contents.querySelectorAll(a),f=Array.prototype.slice.call(e),g=f.length;if(0===g)return void c(!1);f.forEach(function(a){var e=!1;b(a,function(a,b){e===!1&amp;&amp;(g--,d&amp;&amp;d(a,b,g),g&lt;=0&amp;&amp;c&amp;&amp;c(!0),e=!0)})}.bind(this))},RSVP.EventTarget.mixin(EPUBJS.Renderer.prototype);var EPUBJS=EPUBJS||{};EPUBJS.replace={},EPUBJS.replace.hrefs=function(a,b){var c=this,d=function(a,d){var e,f,g,h,i,j=a.getAttribute(&quot;href&quot;),k=j.search(&quot;://&quot;);k!=-1?a.setAttribute(&quot;target&quot;,&quot;_blank&quot;):(g=b.render.docEl.querySelector(&quot;base&quot;),i=g.getAttribute(&quot;href&quot;),h=EPUBJS.core.uri(i),e=h.directory,f=e?&quot;file&quot;===h.protocol?EPUBJS.core.resolveUrl(h.base,j):EPUBJS.core.resolveUrl(e,j):j,a.onclick=function(){return c.goto(f),!1}),d()};b.replace(&quot;a[href]&quot;,d,a)},EPUBJS.replace.head=function(a,b){b.replaceWithStored(&quot;link[href]&quot;,&quot;href&quot;,EPUBJS.replace.links,a)},EPUBJS.replace.resources=function(a,b){b.replaceWithStored(&quot;[src]&quot;,&quot;src&quot;,EPUBJS.replace.srcs,a)},EPUBJS.replace.svg=function(a,b){b.replaceWithStored(&quot;svg image&quot;,&quot;xlink:href&quot;,function(a,b,c){a.getUrl(b).then(c)},a)},EPUBJS.replace.srcs=function(a,b,c){a.getUrl(b).then(c)},EPUBJS.replace.links=function(a,b,c,d){&quot;stylesheet&quot;===d.getAttribute(&quot;rel&quot;)?EPUBJS.replace.stylesheets(a,b).then(function(a,b){c(a,b)},function(a){c(null)}):a.getUrl(b).then(c,function(a){c(null)})},EPUBJS.replace.stylesheets=function(a,b){var c=new RSVP.defer;if(a)return a.getText(b).then(function(d){EPUBJS.replace.cssImports(a,b,d).then(function(e){d=e+d,EPUBJS.replace.cssUrls(a,b,d).then(function(a){var b=window.URL||window.webkitURL||window.mozURL,d=new Blob([a],{type:&quot;text/css&quot;}),e=b.createObjectURL(d);c.resolve(e)},function(a){c.reject(a)})},function(a){c.reject(a)})},function(a){c.reject(a)}),c.promise},EPUBJS.replace.cssImports=function(a,b,c){var d=new RSVP.defer;if(a){for(var e,f=/@import\s+(?:url\()?\&#39;?\&quot;?((?!data:)[^\&#39;|^\&quot;^\)]*)\&#39;?\&quot;?\)?/gi,g=[],h=&quot;&quot;;e=f.exec(c);)g.push(e[1]);return 0===g.length&amp;&amp;d.resolve(h),g.forEach(function(c){var e=EPUBJS.core.resolveUrl(b,c);e=EPUBJS.core.uri(e).path,a.getText(e).then(function(a){h+=a,g.indexOf(c)===g.length-1&amp;&amp;d.resolve(h)},function(a){d.reject(a)})}),d.promise}},EPUBJS.replace.cssUrls=function(a,b,c){var d=new RSVP.defer,e=c.match(/url\(\&#39;?\&quot;?((?!data:)[^\&#39;|^\&quot;^\)]*)\&#39;?\&quot;?\)/g);if(a){if(!e)return d.resolve(c),d.promise;var f=e.map(function(e){var f=EPUBJS.core.resolveUrl(b,e.replace(/url\(|[|\)|\&#39;|\&quot;]|\?.*$/g,&quot;&quot;));return a.getUrl(f).then(function(a){c=c.replace(e,&#39;url(&quot;&#39;+a+&#39;&quot;)&#39;)},function(a){d.reject(a)})});return RSVP.all(f).then(function(){d.resolve(c)}),d.promise}},EPUBJS.Storage=function(a){this.checkRequirements(),this.urlCache={},this.withCredentials=a,this.URL=window.URL||window.webkitURL||window.mozURL,this.offline=!1},EPUBJS.Storage.prototype.checkRequirements=function(a){&quot;undefined&quot;==typeof localforage&amp;&amp;console.error(&quot;localForage library not loaded&quot;)},EPUBJS.Storage.prototype.put=function(a,b){var c=new RSVP.defer,d=a.length,e=0,f=function(b){var c,g,h=b||new RSVP.defer;return e&gt;=d?h.resolve():(c=a[e].url,g=window.encodeURIComponent(c),EPUBJS.core.request(c,&quot;binary&quot;).then(function(a){return localforage.setItem(g,a)}).then(function(a){e++,setTimeout(function(){f(h)},1)})),h.promise}.bind(this);return Array.isArray(a)||(a=[a]),f().then(function(){c.resolve()}.bind(this)),c.promise},EPUBJS.Storage.prototype.token=function(a,b){var c=window.encodeURIComponent(a);return localforage.setItem(c,b).then(function(a){return null!==a})},EPUBJS.Storage.prototype.isStored=function(a){var b=window.encodeURIComponent(a);return localforage.getItem(b).then(function(a){return null!==a})},EPUBJS.Storage.prototype.getText=function(a){var b=window.encodeURIComponent(a);return EPUBJS.core.request(a,&quot;arraybuffer&quot;,this.withCredentials).then(function(a){return this.offline&amp;&amp;(this.offline=!1,this.trigger(&quot;offline&quot;,!1)),localforage.setItem(b,a),a}.bind(this)).then(function(b){var c=new RSVP.defer,d=EPUBJS.core.getMimeType(a),e=new Blob([b],{type:d}),f=new FileReader;return f.addEventListener(&quot;loadend&quot;,function(){c.resolve(f.result)}),f.readAsText(e,d),c.promise}).catch(function(){var c=new RSVP.defer,d=localforage.getItem(b);return this.offline||(this.offline=!0,this.trigger(&quot;offline&quot;,!0)),d?(d.then(function(b){var d=EPUBJS.core.getMimeType(a),e=new Blob([b],{type:d}),f=new FileReader;f.addEventListener(&quot;loadend&quot;,function(){c.resolve(f.result)}),f.readAsText(e,d)}),c.promise):(c.reject({message:&quot;File not found in the storage: &quot;+a,stack:(new Error).stack}),c.promise)}.bind(this))},EPUBJS.Storage.prototype.getUrl=function(a){var b=window.encodeURIComponent(a);return EPUBJS.core.request(a,&quot;arraybuffer&quot;,this.withCredentials).then(function(c){return this.offline&amp;&amp;(this.offline=!1,this.trigger(&quot;offline&quot;,!1)),localforage.setItem(b,c),a}.bind(this)).catch(function(){var c,d,e=new RSVP.defer,f=window.URL||window.webkitURL||window.mozURL;return this.offline||(this.offline=!0,this.trigger(&quot;offline&quot;,!0)),b in this.urlCache?(e.resolve(this.urlCache[b]),e.promise):(c=localforage.getItem(b))?(c.then(function(c){var g=new Blob([c],{type:EPUBJS.core.getMimeType(a)});d=f.createObjectURL(g),e.resolve(d),this.urlCache[b]=d}.bind(this)),e.promise):(e.reject({message:&quot;File not found in the storage: &quot;+a,stack:(new Error).stack}),e.promise)}.bind(this))},EPUBJS.Storage.prototype.getXml=function(a){var b=window.encodeURIComponent(a);return EPUBJS.core.request(a,&quot;arraybuffer&quot;,this.withCredentials).then(function(a){return this.offline&amp;&amp;(this.offline=!1,this.trigger(&quot;offline&quot;,!1)),localforage.setItem(b,a),a}.bind(this)).then(function(b){var c=new RSVP.defer,d=EPUBJS.core.getMimeType(a),e=new Blob([b],{type:d}),f=new FileReader;return f.addEventListener(&quot;loadend&quot;,function(){var a=new DOMParser,b=a.parseFromString(f.result,&quot;text/xml&quot;);c.resolve(b)}),f.readAsText(e,d),c.promise}).catch(function(){var c=new RSVP.defer,d=localforage.getItem(b);return this.offline||(this.offline=!0,this.trigger(&quot;offline&quot;,!0)),d?(d.then(function(b){var d=EPUBJS.core.getMimeType(a),e=new Blob([b],{type:d}),f=new FileReader;f.addEventListener(&quot;loadend&quot;,function(){var a=new DOMParser,b=a.parseFromString(f.result,&quot;text/xml&quot;);c.resolve(b)}),f.readAsText(e,d)}),c.promise):(c.reject({message:&quot;File not found in the storage: &quot;+a,stack:(new Error).stack}),c.promise)}.bind(this))},EPUBJS.Storage.prototype.revokeUrl=function(a){var b=window.URL||window.webkitURL||window.mozURL,c=this.urlCache[a];c&amp;&amp;b.revokeObjectURL(c)},EPUBJS.Storage.prototype.failed=function(a){console.error(a)},RSVP.EventTarget.mixin(EPUBJS.Storage.prototype),EPUBJS.Unarchiver=function(a){this.checkRequirements(),this.urlCache={}},EPUBJS.Unarchiver.prototype.checkRequirements=function(a){&quot;undefined&quot;==typeof JSZip&amp;&amp;console.error(&quot;JSZip lib not loaded&quot;)},EPUBJS.Unarchiver.prototype.open=function(a,b){if(a instanceof ArrayBuffer){this.zip=new JSZip(a);var c=new RSVP.defer;return c.resolve(),c.promise}return EPUBJS.core.request(a,&quot;binary&quot;).then(function(a){this.zip=new JSZip(a)}.bind(this))},EPUBJS.Unarchiver.prototype.getXml=function(a,b){var c=window.decodeURIComponent(a);return this.getText(c,b).then(function(b){var c=new DOMParser,d=EPUBJS.core.getMimeType(a);return 65279===b.charCodeAt(0)&amp;&amp;(b=b.slice(1)),c.parseFromString(b,d)})},EPUBJS.Unarchiver.prototype.getUrl=function(a,b){var c,d,e=this,f=new RSVP.defer,g=window.decodeURIComponent(a),h=this.zip.file(g),i=window.URL||window.webkitURL||window.mozURL;return h?a in this.urlCache?(f.resolve(this.urlCache[a]),f.promise):(d=new Blob([h.asUint8Array()],{type:EPUBJS.core.getMimeType(h.name)}),c=i.createObjectURL(d),f.resolve(c),e.urlCache[a]=c,f.promise):(f.reject({message:&quot;File not found in the epub: &quot;+a,stack:(new Error).stack}),f.promise)},EPUBJS.Unarchiver.prototype.getText=function(a,b){var c,d=new RSVP.defer,e=window.decodeURIComponent(a),f=this.zip.file(e);return f?(c=f.asText(),d.resolve(c),d.promise):(d.reject({message:&quot;File not found in the epub: &quot;+a,stack:(new Error).stack}),d.promise)},EPUBJS.Unarchiver.prototype.revokeUrl=function(a){var b=window.URL||window.webkitURL||window.mozURL,c=this.urlCache[a];c&amp;&amp;b.revokeObjectURL(c)},EPUBJS.Unarchiver.prototype.failed=function(a){console.error(a)},EPUBJS.Unarchiver.prototype.afterSaved=function(a){this.callback()},EPUBJS.Unarchiver.prototype.toStorage=function(a){function b(){0===--e&amp;&amp;d.afterSaved()}var c=0,d=this,e=a.length;a.forEach(function(a){setTimeout(function(a){d.saveEntryFileToStorage(a,b)},c,a),c+=20}),console.log(&quot;time&quot;,c)},function(){var a={application:{ecmascript:[&quot;es&quot;,&quot;ecma&quot;],javascript:&quot;js&quot;,ogg:&quot;ogx&quot;,pdf:&quot;pdf&quot;,postscript:[&quot;ps&quot;,&quot;ai&quot;,&quot;eps&quot;,&quot;epsi&quot;,&quot;epsf&quot;,&quot;eps2&quot;,&quot;eps3&quot;],&quot;rdf+xml&quot;:&quot;rdf&quot;,smil:[&quot;smi&quot;,&quot;smil&quot;],&quot;xhtml+xml&quot;:[&quot;xhtml&quot;,&quot;xht&quot;],xml:[&quot;xml&quot;,&quot;xsl&quot;,&quot;xsd&quot;,&quot;opf&quot;,&quot;ncx&quot;],zip:&quot;zip&quot;,&quot;x-httpd-eruby&quot;:&quot;rhtml&quot;,&quot;x-latex&quot;:&quot;latex&quot;,&quot;x-maker&quot;:[&quot;frm&quot;,&quot;maker&quot;,&quot;frame&quot;,&quot;fm&quot;,&quot;fb&quot;,&quot;book&quot;,&quot;fbdoc&quot;],&quot;x-object&quot;:&quot;o&quot;,&quot;x-shockwave-flash&quot;:[&quot;swf&quot;,&quot;swfl&quot;],&quot;x-silverlight&quot;:&quot;scr&quot;,&quot;epub+zip&quot;:&quot;epub&quot;,&quot;font-tdpfr&quot;:&quot;pfr&quot;,&quot;inkml+xml&quot;:[&quot;ink&quot;,&quot;inkml&quot;],json:&quot;json&quot;,&quot;jsonml+json&quot;:&quot;jsonml&quot;,&quot;mathml+xml&quot;:&quot;mathml&quot;,&quot;metalink+xml&quot;:&quot;metalink&quot;,mp4:&quot;mp4s&quot;,&quot;omdoc+xml&quot;:&quot;omdoc&quot;,oxps:&quot;oxps&quot;,&quot;vnd.amazon.ebook&quot;:&quot;azw&quot;,widget:&quot;wgt&quot;,&quot;x-dtbook+xml&quot;:&quot;dtb&quot;,&quot;x-dtbresource+xml&quot;:&quot;res&quot;,&quot;x-font-bdf&quot;:&quot;bdf&quot;,&quot;x-font-ghostscript&quot;:&quot;gsf&quot;,&quot;x-font-linux-psf&quot;:&quot;psf&quot;,&quot;x-font-otf&quot;:&quot;otf&quot;,&quot;x-font-pcf&quot;:&quot;pcf&quot;,&quot;x-font-snf&quot;:&quot;snf&quot;,&quot;x-font-ttf&quot;:[&quot;ttf&quot;,&quot;ttc&quot;],&quot;x-font-type1&quot;:[&quot;pfa&quot;,&quot;pfb&quot;,&quot;pfm&quot;,&quot;afm&quot;],&quot;x-font-woff&quot;:&quot;woff&quot;,&quot;x-mobipocket-ebook&quot;:[&quot;prc&quot;,&quot;mobi&quot;],&quot;x-mspublisher&quot;:&quot;pub&quot;,&quot;x-nzb&quot;:&quot;nzb&quot;,&quot;x-tgif&quot;:&quot;obj&quot;,&quot;xaml+xml&quot;:&quot;xaml&quot;,&quot;xml-dtd&quot;:&quot;dtd&quot;,&quot;xproc+xml&quot;:&quot;xpl&quot;,&quot;xslt+xml&quot;:&quot;xslt&quot;,&quot;internet-property-stream&quot;:&quot;acx&quot;,&quot;x-compress&quot;:&quot;z&quot;,&quot;x-compressed&quot;:&quot;tgz&quot;,&quot;x-gzip&quot;:&quot;gz&quot;},audio:{flac:&quot;flac&quot;,midi:[&quot;mid&quot;,&quot;midi&quot;,&quot;kar&quot;,&quot;rmi&quot;],mpeg:[&quot;mpga&quot;,&quot;mpega&quot;,&quot;mp2&quot;,&quot;mp3&quot;,&quot;m4a&quot;,&quot;mp2a&quot;,&quot;m2a&quot;,&quot;m3a&quot;],mpegurl:&quot;m3u&quot;,ogg:[&quot;oga&quot;,&quot;ogg&quot;,&quot;spx&quot;],&quot;x-aiff&quot;:[&quot;aif&quot;,&quot;aiff&quot;,&quot;aifc&quot;],&quot;x-ms-wma&quot;:&quot;wma&quot;,&quot;x-wav&quot;:&quot;wav&quot;,adpcm:&quot;adp&quot;,mp4:&quot;mp4a&quot;,webm:&quot;weba&quot;,&quot;x-aac&quot;:&quot;aac&quot;,&quot;x-caf&quot;:&quot;caf&quot;,&quot;x-matroska&quot;:&quot;mka&quot;,&quot;x-pn-realaudio-plugin&quot;:&quot;rmp&quot;,xm:&quot;xm&quot;,mid:[&quot;mid&quot;,&quot;rmi&quot;]},image:{gif:&quot;gif&quot;,ief:&quot;ief&quot;,jpeg:[&quot;jpeg&quot;,&quot;jpg&quot;,&quot;jpe&quot;],pcx:&quot;pcx&quot;,png:&quot;png&quot;,&quot;svg+xml&quot;:[&quot;svg&quot;,&quot;svgz&quot;],tiff:[&quot;tiff&quot;,&quot;tif&quot;],&quot;x-icon&quot;:&quot;ico&quot;,bmp:&quot;bmp&quot;,webp:&quot;webp&quot;,&quot;x-pict&quot;:[&quot;pic&quot;,&quot;pct&quot;],&quot;x-tga&quot;:&quot;tga&quot;,&quot;cis-cod&quot;:&quot;cod&quot;},message:{rfc822:[&quot;eml&quot;,&quot;mime&quot;,&quot;mht&quot;,&quot;mhtml&quot;,&quot;nws&quot;]},text:{&quot;cache-manifest&quot;:[&quot;manifest&quot;,&quot;appcache&quot;],calendar:[&quot;ics&quot;,&quot;icz&quot;,&quot;ifb&quot;],css:&quot;css&quot;,csv:&quot;csv&quot;,h323:&quot;323&quot;,html:[&quot;html&quot;,&quot;htm&quot;,&quot;shtml&quot;,&quot;stm&quot;],iuls:&quot;uls&quot;,mathml:&quot;mml&quot;,plain:[&quot;txt&quot;,&quot;text&quot;,&quot;brf&quot;,&quot;conf&quot;,&quot;def&quot;,&quot;list&quot;,&quot;log&quot;,&quot;in&quot;,&quot;bas&quot;],richtext:&quot;rtx&quot;,&quot;tab-separated-values&quot;:&quot;tsv&quot;,&quot;x-bibtex&quot;:&quot;bib&quot;,&quot;x-dsrc&quot;:&quot;d&quot;,&quot;x-diff&quot;:[&quot;diff&quot;,&quot;patch&quot;],&quot;x-haskell&quot;:&quot;hs&quot;,&quot;x-java&quot;:&quot;java&quot;,&quot;x-literate-haskell&quot;:&quot;lhs&quot;,&quot;x-moc&quot;:&quot;moc&quot;,&quot;x-pascal&quot;:[&quot;p&quot;,&quot;pas&quot;],&quot;x-pcs-gcd&quot;:&quot;gcd&quot;,&quot;x-perl&quot;:[&quot;pl&quot;,&quot;pm&quot;],&quot;x-python&quot;:&quot;py&quot;,&quot;x-scala&quot;:&quot;scala&quot;,&quot;x-setext&quot;:&quot;etx&quot;,&quot;x-tcl&quot;:[&quot;tcl&quot;,&quot;tk&quot;],&quot;x-tex&quot;:[&quot;tex&quot;,&quot;ltx&quot;,&quot;sty&quot;,&quot;cls&quot;],&quot;x-vcard&quot;:&quot;vcf&quot;,sgml:[&quot;sgml&quot;,&quot;sgm&quot;],&quot;x-c&quot;:[&quot;c&quot;,&quot;cc&quot;,&quot;cxx&quot;,&quot;cpp&quot;,&quot;h&quot;,&quot;hh&quot;,&quot;dic&quot;],&quot;x-fortran&quot;:[&quot;f&quot;,&quot;for&quot;,&quot;f77&quot;,&quot;f90&quot;],&quot;x-opml&quot;:&quot;opml&quot;,&quot;x-nfo&quot;:&quot;nfo&quot;,&quot;x-sfv&quot;:&quot;sfv&quot;,&quot;x-uuencode&quot;:&quot;uu&quot;,webviewhtml:&quot;htt&quot;},video:{mpeg:[&quot;mpeg&quot;,&quot;mpg&quot;,&quot;mpe&quot;,&quot;m1v&quot;,&quot;m2v&quot;,&quot;mp2&quot;,&quot;mpa&quot;,&quot;mpv2&quot;],mp4:[&quot;mp4&quot;,&quot;mp4v&quot;,&quot;mpg4&quot;],quicktime:[&quot;qt&quot;,&quot;mov&quot;],ogg:&quot;ogv&quot;,&quot;vnd.mpegurl&quot;:[&quot;mxu&quot;,&quot;m4u&quot;],&quot;x-flv&quot;:&quot;flv&quot;,&quot;x-la-asf&quot;:[&quot;lsf&quot;,&quot;lsx&quot;],&quot;x-mng&quot;:&quot;mng&quot;,&quot;x-ms-asf&quot;:[&quot;asf&quot;,&quot;asx&quot;,&quot;asr&quot;],&quot;x-ms-wm&quot;:&quot;wm&quot;,&quot;x-ms-wmv&quot;:&quot;wmv&quot;,&quot;x-ms-wmx&quot;:&quot;wmx&quot;,&quot;x-ms-wvx&quot;:&quot;wvx&quot;,&quot;x-msvideo&quot;:&quot;avi&quot;,&quot;x-sgi-movie&quot;:&quot;movie&quot;,&quot;x-matroska&quot;:[&quot;mpv&quot;,&quot;mkv&quot;,&quot;mk3d&quot;,&quot;mks&quot;],&quot;3gpp2&quot;:&quot;3g2&quot;,h261:&quot;h261&quot;,h263:&quot;h263&quot;,h264:&quot;h264&quot;,jpeg:&quot;jpgv&quot;,jpm:[&quot;jpm&quot;,&quot;jpgm&quot;],mj2:[&quot;mj2&quot;,&quot;mjp2&quot;],&quot;vnd.ms-playready.media.pyv&quot;:&quot;pyv&quot;,&quot;vnd.uvvu.mp4&quot;:[&quot;uvu&quot;,&quot;uvvu&quot;],&quot;vnd.vivo&quot;:&quot;viv&quot;,webm:&quot;webm&quot;,&quot;x-f4v&quot;:&quot;f4v&quot;,&quot;x-m4v&quot;:&quot;m4v&quot;,&quot;x-ms-vob&quot;:&quot;vob&quot;,&quot;x-smv&quot;:&quot;smv&quot;}},b=function(){var b,c,d,e,f={};for(b in a)if(a.hasOwnProperty(b))for(c in a[b])if(a[b].hasOwnProperty(c))if(&quot;string&quot;==typeof(d=a[b][c]))f[d]=b+&quot;/&quot;+c;else for(e=0;e&lt;d.length;e++)f[d[e]]=b+&quot;/&quot;+c;return f}();EPUBJS.core.getMimeType=function(a){return a&amp;&amp;b[a.split(&quot;.&quot;).pop().toLowerCase()]||&quot;text/plain&quot;}}();</td>
      </tr>
</table>

  <div class="BlobToolbar position-absolute js-file-line-actions dropdown js-menu-container js-select-menu d-none" aria-hidden="true">
    <button class="btn-octicon ml-0 px-2 p-0 bg-white border border-gray-dark rounded-1 js-menu-target" type="button" aria-expanded="false" aria-haspopup="true" aria-label="Inline file action toolbar" aria-controls="inline-file-actions">
      <svg class="octicon octicon-kebab-horizontal" viewBox="0 0 13 16" version="1.1" width="13" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM13 7.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>
    </button>
    <div class="dropdown-menu-content js-menu-content" id="inline-file-actions">
      <ul class="BlobToolbar-dropdown dropdown-menu dropdown-menu-se mt-2">
        <li><clipboard-copy class="dropdown-item" id="js-copy-lines" style="cursor:pointer;" data-original-text="Copy lines">Copy lines</clipboard-copy></li>
        <li><clipboard-copy class="dropdown-item" id="js-copy-permalink" style="cursor:pointer;" data-original-text="Copy permalink">Copy permalink</clipboard-copy></li>
        <li><a class="dropdown-item js-update-url-with-hash" id="js-view-git-blame" href="/futurepress/epub.js/blame/d1261579997eba793544b10fffaa7f62a478b1cc/build/epub.min.js">View git blame</a></li>
          <li><a class="dropdown-item" id="js-new-issue" href="/futurepress/epub.js/issues/new">Open new issue</a></li>
      </ul>
    </div>
  </div>

  </div>

  </div>

  <details class="details-reset details-overlay details-overlay-dark">
    <summary data-hotkey="l" aria-label="Jump to line"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast linejump" aria-label="Jump to line">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-jump-to-line-form Box-body d-flex" action="" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
        <input class="form-control flex-auto mr-3 linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
        <button type="submit" class="btn" data-close-dialog>Go</button>
</form>    </details-dialog>
  </details>


  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

      
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">&copy; 2018 <span title="0.33651s from unicorn-868784894b-wclgs">GitHub</span>, Inc.</li>
        <li class="mr-3"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://help.github.com/articles/github-security/" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon" href="https://github.com">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a href="https://blog.github.com" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    
    <script crossorigin="anonymous" integrity="sha512-MMf7GwM+L5Gyt9uiyH+dgfRMKe3MvokMsK8rmZ7miC4hQRLp/SFC1p9FQF64rH4238QIetIh02tl1O9BqBVTsg==" type="application/javascript" src="https://assets-cdn.github.com/assets/frameworks-6b835006a412df5637ae735f7e380290.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-Ffeayur1QmJSDhVHLwLSSOzxaJzhpwY4s4nEekgCMM7l8OMMBsqGLTfyv3NZ7DuU4Ik3j9fx/7AucDAA+ezhAg==" type="application/javascript" src="https://assets-cdn.github.com/assets/github-37bb49cf7d136602403cb9b5a8e7a4f3.js"></script>
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
  </div>
</div>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

<div id="hovercard-aria-description" class="sr-only">
  Press h to open a hovercard with more details.
</div>


  </body>
</html>

